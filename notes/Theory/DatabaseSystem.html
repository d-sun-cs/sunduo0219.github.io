<!DOCTYPE html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.60" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://www.sundocker.online/notes/Theory/DatabaseSystem.html"><meta property="og:site_name" content="SunDocker"><meta property="og:title" content="Database System"><meta property="og:description" content="1 数据库系统概述 1.1 数据库系统的概念与功能 数据库系统的构成与功能： Everything Over DB 数据库系统的构成; 数据库(DB)：Database，相互之间有关联关系的表的集合; 数据库管理系统(DBMS)：DataBase Management System，管理数据库的系统软件; 数据库应用(DBAP)：DataBase AP..."><meta property="og:type" content="article"><meta property="og:locale" content="en-US"><meta property="og:updated_time" content="2023-02-20T07:31:00.000Z"><meta property="article:tag" content="Computer"><meta property="article:tag" content="Database System"><meta property="article:published_time" content="2023-02-15T00:00:00.000Z"><meta property="article:modified_time" content="2023-02-20T07:31:00.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Database System","image":[""],"datePublished":"2023-02-15T00:00:00.000Z","dateModified":"2023-02-20T07:31:00.000Z","author":[]}</script><title>Database System | SunDocker</title><meta name="description" content="1 数据库系统概述 1.1 数据库系统的概念与功能 数据库系统的构成与功能： Everything Over DB 数据库系统的构成; 数据库(DB)：Database，相互之间有关联关系的表的集合; 数据库管理系统(DBMS)：DataBase Management System，管理数据库的系统软件; 数据库应用(DBAP)：DataBase AP...">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-28c78fad.css" as="style"><link rel="stylesheet" href="/assets/style-28c78fad.css">
    <link rel="modulepreload" href="/assets/app-a94a8ef5.js"><link rel="modulepreload" href="/assets/framework-3800c176.js"><link rel="modulepreload" href="/assets/DatabaseSystem.html-a58cf682.js"><link rel="modulepreload" href="/assets/DatabaseSystem.html-2d6f95ec.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container has-toc"><!--[--><header class="navbar" id="navbar"><div class="navbar-start"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><img class="logo" src="/logo0.png" alt="SunDocker"><!----><span class="site-name hide-in-pad">SunDocker</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" aria-label="Blog Home"><span class="font-icon icon iconfont icon-home" style=""></span>Blog Home<!----></a></div><div class="nav-item hide-in-mobile"><a href="/posts/" class="nav-link" aria-label="Posts"><span class="font-icon icon iconfont icon-blog" style=""></span>Posts<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Notes"><span class="title"><span class="font-icon icon iconfont icon-repo" style=""></span>Notes</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Theory</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/notes/Theory/OperationSystem.html" class="nav-link" aria-label="Operation System"><span class="font-icon icon iconfont icon-OS" style=""></span>Operation System<!----></a></li><li class="dropdown-subitem"><a href="/notes/Theory/DataStructure.html" class="nav-link" aria-label="Data Structure &amp; Algorithm"><span class="font-icon icon iconfont icon-emmet" style=""></span>Data Structure &amp; Algorithm<!----></a></li><li class="dropdown-subitem"><a href="/notes/Theory/ComputerNetwork.html" class="nav-link" aria-label="Computer Network"><span class="font-icon icon iconfont icon-network" style=""></span>Computer Network<!----></a></li><li class="dropdown-subitem"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html" class="router-link-active router-link-exact-active nav-link active" aria-label="Database System"><span class="font-icon icon iconfont icon-storage" style=""></span>Database System<!----></a></li><li class="dropdown-subitem"><a href="/notes/Theory/CompositionPrinciple.html" class="nav-link" aria-label="Composition Principle"><span class="font-icon icon iconfont icon-process" style=""></span>Composition Principle<!----></a></li><li class="dropdown-subitem"><a href="/notes/Theory/DesignPatterns.html" class="nav-link" aria-label="Design Patterns"><span class="font-icon icon iconfont icon-float" style=""></span>Design Patterns<!----></a></li><li class="dropdown-subitem"><a href="/notes/Theory/CompilePrinciple.html" class="nav-link" aria-label="Compiler Principle"><span class="font-icon icon iconfont icon-semantic" style=""></span>Compiler Principle<!----></a></li><li class="dropdown-subitem"><a href="/notes/Theory/XV6LabSummary.html" class="nav-link" aria-label="XV6 Lab Summary"><span class="font-icon icon iconfont icon-OS" style=""></span>XV6 Lab Summary<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>C</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/notes/C/Cpp.html" class="nav-link" aria-label="C++"><span class="font-icon icon iconfont icon-c" style=""></span>C++<!----></a></li><li class="dropdown-subitem"><a href="/notes/C/LinuxSystemProgramming.html" class="nav-link" aria-label="Linux System Programming"><span class="font-icon icon iconfont icon-linux" style=""></span>Linux System Programming<!----></a></li><li class="dropdown-subitem"><a href="/notes/C/LinuxNetworkProgramming.html" class="nav-link" aria-label="Linux Network Programming"><span class="font-icon icon iconfont icon-linux" style=""></span>Linux Network Programming<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Java</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/notes/Java/JavaSE.html" class="nav-link" aria-label="Java SE"><span class="font-icon icon iconfont icon-java" style=""></span>Java SE<!----></a></li><li class="dropdown-subitem"><a href="/notes/Java/Servlet.html" class="nav-link" aria-label="Servlet"><span class="font-icon icon iconfont icon-api" style=""></span>Servlet<!----></a></li><li class="dropdown-subitem"><a href="/notes/Java/JDBC.html" class="nav-link" aria-label="JDBC"><span class="font-icon icon iconfont icon-api" style=""></span>JDBC<!----></a></li><li class="dropdown-subitem"><a href="/notes/Java/SpringFramework.html" class="nav-link" aria-label="Spring Framework"><span class="font-icon icon iconfont icon-leaf" style=""></span>Spring Framework<!----></a></li><li class="dropdown-subitem"><a href="/notes/Java/MyBatis.html" class="nav-link" aria-label="MyBatis"><span class="font-icon icon iconfont icon-storage" style=""></span>MyBatis<!----></a></li><li class="dropdown-subitem"><a href="/notes/Java/SpringMVC.html" class="nav-link" aria-label="Spring MVC"><span class="font-icon icon iconfont icon-view" style=""></span>Spring MVC<!----></a></li><li class="dropdown-subitem"><a href="/notes/Java/SpringBoot.html" class="nav-link" aria-label="Spring Boot"><span class="font-icon icon iconfont icon-light" style=""></span>Spring Boot<!----></a></li><li class="dropdown-subitem"><a href="/notes/Java/SpringCloud.html" class="nav-link" aria-label="Spring Cloud"><span class="font-icon icon iconfont icon-cache" style=""></span>Spring Cloud<!----></a></li><li class="dropdown-subitem"><a href="/notes/Java/JUC.html" class="nav-link" aria-label="JUC"><span class="font-icon icon iconfont icon-asynchronous" style=""></span>JUC<!----></a></li><li class="dropdown-subitem"><a href="/notes/Java/Java-gRPC.html" class="nav-link" aria-label="Java gRPC"><span class="font-icon icon iconfont icon-remote" style=""></span>Java gRPC<!----></a></li><li class="dropdown-subitem"><a href="/notes/Java/Netty.html" class="nav-link" aria-label="Netty"><span class="font-icon icon iconfont icon-network" style=""></span>Netty<!----></a></li><li class="dropdown-subitem"><a href="/notes/Java/Hadoop.html" class="nav-link" aria-label="Hadoop"><span class="font-icon icon iconfont icon-overflow" style=""></span>Hadoop<!----></a></li><li class="dropdown-subitem"><a href="/notes/Java/Kotlin.html" class="nav-link" aria-label="Kotlin"><span class="font-icon icon iconfont icon-compare" style=""></span>Kotlin<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Database</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/notes/Database/MySQL.html" class="nav-link" aria-label="MySQL"><span class="font-icon icon iconfont icon-mysql" style=""></span>MySQL<!----></a></li><li class="dropdown-subitem"><a href="/notes/Database/Redis.html" class="nav-link" aria-label="Redis"><span class="font-icon icon iconfont icon-bitbucket" style=""></span>Redis<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Frontend</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/notes/Frontend/HTML.html" class="nav-link" aria-label="HTML"><span class="font-icon icon iconfont icon-html" style=""></span>HTML<!----></a></li><li class="dropdown-subitem"><a href="/notes/Frontend/JavaScript.html" class="nav-link" aria-label="JavaScript"><span class="font-icon icon iconfont icon-javascript" style=""></span>JavaScript<!----></a></li><li class="dropdown-subitem"><a href="/notes/Frontend/CSS.html" class="nav-link" aria-label="CSS"><span class="font-icon icon iconfont icon-css" style=""></span>CSS<!----></a></li><li class="dropdown-subitem"><a href="/notes/Frontend/Node.html" class="nav-link" aria-label="Node"><span class="font-icon icon iconfont icon-nodeJS" style=""></span>Node<!----></a></li><li class="dropdown-subitem"><a href="/notes/Frontend/Vue.html" class="nav-link" aria-label="Vue"><span class="font-icon icon iconfont icon-vue" style=""></span>Vue<!----></a></li><li class="dropdown-subitem"><a href="/notes/Frontend/uni-app.html" class="nav-link" aria-label="uni-app"><span class="font-icon icon iconfont icon-app" style=""></span>uni-app<!----></a></li><li class="dropdown-subitem"><a href="/notes/Frontend/Dart.html" class="nav-link" aria-label="Dart"><span class="font-icon icon iconfont icon-dart" style=""></span>Dart<!----></a></li><li class="dropdown-subitem"><a href="/notes/Frontend/Flutter.html" class="nav-link" aria-label="Flutter"><span class="font-icon icon iconfont icon-dart" style=""></span>Flutter<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Golang</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/notes/Golang/Golang.html" class="nav-link" aria-label="Golang"><span class="font-icon icon iconfont icon-chrome" style=""></span>Golang<!----></a></li><li class="dropdown-subitem"><a href="/notes/Golang/Gin.html" class="nav-link" aria-label="Gin"><span class="font-icon icon iconfont icon-rss" style=""></span>Gin<!----></a></li><li class="dropdown-subitem"><a href="/notes/Golang/Go-gRPC.html" class="nav-link" aria-label="Go gRPC"><span class="font-icon icon iconfont icon-remote" style=""></span>Go gRPC<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Operations</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/notes/Operations/Linux.html" class="nav-link" aria-label="Linux"><span class="font-icon icon iconfont icon-linux" style=""></span>Linux<!----></a></li><li class="dropdown-subitem"><a href="/notes/Operations/Docker.html" class="nav-link" aria-label="Docker"><span class="font-icon icon iconfont icon-module" style=""></span>Docker<!----></a></li><li class="dropdown-subitem"><a href="/notes/Operations/Nginx.html" class="nav-link" aria-label="Nginx"><span class="font-icon icon iconfont icon-nginx" style=""></span>Nginx<!----></a></li><li class="dropdown-subitem"><a href="/notes/Operations/Kubernetes.html" class="nav-link" aria-label="Kubernetes"><span class="font-icon icon iconfont icon-relation" style=""></span>Kubernetes<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Mangement</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/notes/Management/Git.html" class="nav-link" aria-label="Git"><span class="font-icon icon iconfont icon-git" style=""></span>Git<!----></a></li><li class="dropdown-subitem"><a href="/notes/Management/Maven.html" class="nav-link" aria-label="Maven"><span class="font-icon icon iconfont icon-box" style=""></span>Maven<!----></a></li><li class="dropdown-subitem"><a href="/notes/Management/Gradle.html" class="nav-link" aria-label="Gradle"><span class="font-icon icon iconfont icon-leaf" style=""></span>Gradle<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Python</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/notes/Python/DataMining.html" class="nav-link" aria-label="Data Mining"><!---->Data Mining<!----></a></li><li class="dropdown-subitem"><a href="/notes/Python/DataAnalysis.html" class="nav-link" aria-label="Data Analysis"><!---->Data Analysis<!----></a></li><li class="dropdown-subitem"><a href="/notes/Python/MachineLearning.html" class="nav-link" aria-label="Machine Learning"><!---->Machine Learning<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="/demo/" class="nav-link" aria-label="Overall"><span class="font-icon icon iconfont icon-discover" style=""></span>Overall<!----></a></div><div class="nav-item hide-in-mobile"><a href="https://theme-hope.vuejs.press/zh/" rel="noopener noreferrer" target="_blank" aria-label="Theme Docs" class="nav-link"><span class="font-icon icon iconfont icon-note" style=""></span>Theme Docs<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div></nav><!--[--><!----><!--]--></div><div class="navbar-end"><!--[--><!----><!--]--><!----><div class="nav-item"><a class="repo-link" href="https://github.com/SunDocker/SunDocker.github.io" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><!--[--><button class="search-pro-button" role="search" aria-label="Search"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="placeholder">Search</div><div class="key-hints"><kbd class="key">Ctrl</kbd><kbd class="key">K</kbd></div></button><!--]--><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside class="sidebar" id="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/notes/" class="nav-link sidebar-link sidebar-page" aria-label="Notes"><span class="font-icon icon iconfont icon-list" style=""></span>Notes<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-c" style=""></span><span class="title">C</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-storage" style=""></span><span class="title">Database</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-page" style=""></span><span class="title">Frontend</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-chrome" style=""></span><span class="title">Golang</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-java" style=""></span><span class="title">Java</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-tool" style=""></span><span class="title">Management</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-software" style=""></span><span class="title">Operations</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-python" style=""></span><span class="title">Python</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable active"><span class="font-icon icon iconfont icon-read" style=""></span><span class="title">Theory</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/notes/Theory/CompilePrinciple.html" class="nav-link sidebar-link sidebar-page" aria-label="Compiler Principle"><span class="font-icon icon iconfont icon-semantic" style=""></span>Compiler Principle<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/notes/Theory/CompositionPrinciple.html" class="nav-link sidebar-link sidebar-page" aria-label="Composition Principle"><span class="font-icon icon iconfont icon-process" style=""></span>Composition Principle<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/notes/Theory/ComputerNetwork.html" class="nav-link sidebar-link sidebar-page" aria-label="Computer Network"><span class="font-icon icon iconfont icon-network" style=""></span>Computer Network<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/notes/Theory/DataStructure.html" class="nav-link sidebar-link sidebar-page" aria-label="Data Structure &amp; Algorithm"><span class="font-icon icon iconfont icon-emmet" style=""></span>Data Structure &amp; Algorithm<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/notes/Theory/DatabaseSystem.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="Database System"><span class="font-icon icon iconfont icon-storage" style=""></span>Database System<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_1-数据库系统概述" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1 数据库系统概述"><!---->1 数据库系统概述<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_1-1-数据库系统的概念与功能" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.1 数据库系统的概念与功能"><!---->1.1 数据库系统的概念与功能<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_1-2-数据库系统的抽象结构" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.2 数据库系统的抽象结构"><!---->1.2 数据库系统的抽象结构<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_2-关系模型" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2 关系模型"><!---->2 关系模型<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_2-1-关系模型基础" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.1 关系模型基础"><!---->2.1 关系模型基础<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_2-2-关系代数" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.2 关系代数"><!---->2.2 关系代数<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_3-database-language-sql" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3 Database Language - SQL"><!---->3 Database Language - SQL<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_3-1-basic-sql" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.1 Basic SQL"><!---->3.1 Basic SQL<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_3-2-extended-sql-view" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.2 Extended SQL &amp; View"><!---->3.2 Extended SQL &amp; View<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_3-3-database-integrity" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.3 Database Integrity"><!---->3.3 Database Integrity<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_3-4-database-security" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.4 Database Security"><!---->3.4 Database Security<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_4-data-modeling" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4 Data Modeling"><!---->4 Data Modeling<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_4-1-three-worlds-with-levels-of-abstraction" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.1 Three Worlds With Levels of Abstraction"><!---->4.1 Three Worlds With Levels of Abstraction<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_4-2-entity-relationship-model" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.2 Entity-Relationship Model"><!---->4.2 Entity-Relationship Model<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_4-3-idef1x" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.3 IDEF1x"><!---->4.3 IDEF1x<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_5-database-design" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5 Database Design"><!---->5 Database Design<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_5-1-process-of-database-design" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.1 Process of Database Design"><!---->5.1 Process of Database Design<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_5-2-database-design-theories" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.2 Database Design Theories"><!---->5.2 Database Design Theories<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_6-physical-storage-index" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6 Physical Storage &amp; Index"><!---->6 Physical Storage &amp; Index<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_6-1-storage-architecture" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.1 Storage Architecture"><!---->6.1 Storage Architecture<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_6-2-index-overview" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.2 Index Overview"><!---->6.2 Index Overview<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_6-3-ordered-index" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.3 Ordered Index"><!---->6.3 Ordered Index<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_6-4-b-tree" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.4 B+ Tree"><!---->6.4 B+ Tree<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_6-5-hash-index" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.5 Hash Index"><!---->6.5 Hash Index<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_7-query-algorithm" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7 Query Algorithm"><!---->7 Query Algorithm<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_7-1-query-implementation-overview" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7.1 Query Implementation Overview"><!---->7.1 Query Implementation Overview<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_7-2-iterator-algorithm" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7.2 Iterator Algorithm"><!---->7.2 Iterator Algorithm<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_7-3-one-pass-scanning-algorithm" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7.3 One-pass Scanning Algorithm"><!---->7.3 One-pass Scanning Algorithm<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_7-4-two-pass-scanning-algorithm" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7.4 Two-pass Scanning Algorithm"><!---->7.4 Two-pass Scanning Algorithm<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_7-5-query-optimization" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7.5 Query Optimization"><!---->7.5 Query Optimization<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_8-transaction-processing" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8 Transaction Processing"><!---->8 Transaction Processing<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_8-1-concurrency-control" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8.1 Concurrency Control"><!---->8.1 Concurrency Control<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_8-2-failure-recovery" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8.2 Failure Recovery"><!---->8.2 Failure Recovery<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li><li><!--[--><a href="/notes/Theory/DesignPatterns.html" class="nav-link sidebar-link sidebar-page" aria-label="Design Patterns"><span class="font-icon icon iconfont icon-float" style=""></span>Design Patterns<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/notes/Theory/DistributedSystem.html" class="nav-link sidebar-link sidebar-page" aria-label="Distributed System"><span class="font-icon icon iconfont icon-OS" style=""></span>Distributed System<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/notes/Theory/NetworkSecurity.html" class="nav-link sidebar-link sidebar-page" aria-label="Network Security"><!---->Network Security<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/notes/Theory/OperationSystem.html" class="nav-link sidebar-link sidebar-page" aria-label="Operation System"><span class="font-icon icon iconfont icon-OS" style=""></span>Operation System<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/notes/Theory/XV6LabSummary.html" class="nav-link sidebar-link sidebar-page" aria-label="XV6 Lab Summary"><span class="font-icon icon iconfont icon-OS" style=""></span>XV6 Lab Summary<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><span class="font-icon icon iconfont icon-storage" style=""></span>Database System</h1><div class="page-info"><span class="page-author-info" aria-label="Author🖊" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://sundocker.online" target="_blank" rel="noopener noreferrer">Dominic Sun</a></span><span property="author" content="Dominic Sun"></span></span><!----><span class="page-date-info" aria-label="Writing Date📅" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-02-15T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="Reading Time⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 40 min</span><meta property="timeRequired" content="PT40M"></span><span class="page-category-info" aria-label="Category🌈" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><span class="page-category-item category7 clickable" role="navigation">Computer Theory</span><meta property="articleSection" content="Computer Theory"></span><span class="page-tag-info" aria-label="Tag🏷" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><span class="page-tag-item tag3 clickable" role="navigation">Computer</span><span class="page-tag-item tag2 clickable" role="navigation">Database System</span><meta property="keywords" content="Computer,Database System"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">On This Page<button class="print-button" title="print"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_1-数据库系统概述" class="router-link-active router-link-exact-active toc-link level2">1 数据库系统概述</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_1-1-数据库系统的概念与功能" class="router-link-active router-link-exact-active toc-link level3">1.1 数据库系统的概念与功能</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_1-2-数据库系统的抽象结构" class="router-link-active router-link-exact-active toc-link level3">1.2 数据库系统的抽象结构</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_2-关系模型" class="router-link-active router-link-exact-active toc-link level2">2 关系模型</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_2-1-关系模型基础" class="router-link-active router-link-exact-active toc-link level3">2.1 关系模型基础</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_2-2-关系代数" class="router-link-active router-link-exact-active toc-link level3">2.2 关系代数</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_3-database-language-sql" class="router-link-active router-link-exact-active toc-link level2">3 Database Language - SQL</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_3-1-basic-sql" class="router-link-active router-link-exact-active toc-link level3">3.1 Basic SQL</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_3-2-extended-sql-view" class="router-link-active router-link-exact-active toc-link level3">3.2 Extended SQL &amp; View</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_3-3-database-integrity" class="router-link-active router-link-exact-active toc-link level3">3.3 Database Integrity</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_3-4-database-security" class="router-link-active router-link-exact-active toc-link level3">3.4 Database Security</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_4-data-modeling" class="router-link-active router-link-exact-active toc-link level2">4 Data Modeling</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_4-1-three-worlds-with-levels-of-abstraction" class="router-link-active router-link-exact-active toc-link level3">4.1 Three Worlds With Levels of Abstraction</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_4-2-entity-relationship-model" class="router-link-active router-link-exact-active toc-link level3">4.2 Entity-Relationship Model</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_4-3-idef1x" class="router-link-active router-link-exact-active toc-link level3">4.3 IDEF1x</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_5-database-design" class="router-link-active router-link-exact-active toc-link level2">5 Database Design</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_5-1-process-of-database-design" class="router-link-active router-link-exact-active toc-link level3">5.1 Process of Database Design</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_5-2-database-design-theories" class="router-link-active router-link-exact-active toc-link level3">5.2 Database Design Theories</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_6-physical-storage-index" class="router-link-active router-link-exact-active toc-link level2">6 Physical Storage &amp; Index</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_6-1-storage-architecture" class="router-link-active router-link-exact-active toc-link level3">6.1 Storage Architecture</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_6-2-index-overview" class="router-link-active router-link-exact-active toc-link level3">6.2 Index Overview</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_6-3-ordered-index" class="router-link-active router-link-exact-active toc-link level3">6.3 Ordered Index</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_6-4-b-tree" class="router-link-active router-link-exact-active toc-link level3">6.4 B+ Tree</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_6-5-hash-index" class="router-link-active router-link-exact-active toc-link level3">6.5 Hash Index</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_7-query-algorithm" class="router-link-active router-link-exact-active toc-link level2">7 Query Algorithm</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_7-1-query-implementation-overview" class="router-link-active router-link-exact-active toc-link level3">7.1 Query Implementation Overview</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_7-2-iterator-algorithm" class="router-link-active router-link-exact-active toc-link level3">7.2 Iterator Algorithm</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_7-3-one-pass-scanning-algorithm" class="router-link-active router-link-exact-active toc-link level3">7.3 One-pass Scanning Algorithm</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_7-4-two-pass-scanning-algorithm" class="router-link-active router-link-exact-active toc-link level3">7.4 Two-pass Scanning Algorithm</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_7-5-query-optimization" class="router-link-active router-link-exact-active toc-link level3">7.5 Query Optimization</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_8-transaction-processing" class="router-link-active router-link-exact-active toc-link level2">8 Transaction Processing</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_8-1-concurrency-control" class="router-link-active router-link-exact-active toc-link level3">8.1 Concurrency Control</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/Theory/DatabaseSystem.html#_8-2-failure-recovery" class="router-link-active router-link-exact-active toc-link level3">8.2 Failure Recovery</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="database-system" tabindex="-1"><a class="header-anchor" href="#database-system" aria-hidden="true">#</a> Database System</h1><h2 id="_1-数据库系统概述" tabindex="-1"><a class="header-anchor" href="#_1-数据库系统概述" aria-hidden="true">#</a> 1 数据库系统概述</h2><h3 id="_1-1-数据库系统的概念与功能" tabindex="-1"><a class="header-anchor" href="#_1-1-数据库系统的概念与功能" aria-hidden="true">#</a> 1.1 数据库系统的概念与功能</h3><h4 id="数据库系统的构成与功能" tabindex="-1"><a class="header-anchor" href="#数据库系统的构成与功能" aria-hidden="true">#</a> <em>数据库系统的构成与功能：</em></h4><blockquote><p>Everything Over DB</p></blockquote><ul><li><u>数据库系统的构成</u><ul><li>数据库(DB)：Database，相互之间有关联关系的表的集合</li><li>数据库管理系统(DBMS)：DataBase Management System，管理数据库的系统软件</li><li>数据库应用(DBAP)：DataBase APplication，完成某种数据库相关功能的应用程序</li><li>数据库管理员(DBA)：DataBase Administrator</li><li>计算机基本系统</li></ul></li><li><u>数据库系统的功能</u><ul><li><p>数据库可以实现<strong>信息的积累与运用</strong></p><ul><li>积累：<strong>形成数据库</strong></li><li>运用：将积累的信息转换为<strong>效益</strong></li></ul></li><li><p>提供数据库的<strong>管理与控制</strong>功能</p></li><li><p>数据库是<strong>大数据</strong>技术的基础</p><ul><li>只求<strong>关系</strong>，不求因果</li><li>从<strong>部分数据集</strong>上的分析，到<strong>全数据集</strong>上的分析</li></ul></li></ul></li></ul><hr><h4 id="数据库与表的概念" tabindex="-1"><a class="header-anchor" href="#数据库与表的概念" aria-hidden="true">#</a> <em>数据库与表的概念：</em></h4><ul><li><p><u>数据库的概念</u>：</p><ul><li>数据库是<strong>电子化信息</strong>的集合</li><li>数据库是相互之间<strong>有关联关系的表</strong>的集合，存放若干表的大型<strong>文件</strong></li></ul></li><li><p><u>表的概念</u>：以<strong>按行按列</strong>形式组织及展现的数据</p><blockquote><p>表也可以称之为<strong>关系</strong></p></blockquote></li><li><p><u>表的构成</u>：</p><ul><li>表名</li><li>表标题（格式）</li><li>表内容（值）</li><li>表结构 <ul><li>行(row)/元组(tuple)/记录(record)</li><li>列(column)/字段(field)/属性(attribute)/数据项(data item)t</li></ul></li></ul></li><li><p><u>表的作用</u>：</p><ul><li>表中描述了一批相互有<strong>关联关系</strong>的数据</li><li>基于表提出了<strong>关系及关系模型</strong>，提出了<strong>关系数据库</strong></li></ul></li></ul><hr><h4 id="数据库管理系统的概念与功能" tabindex="-1"><a class="header-anchor" href="#数据库管理系统的概念与功能" aria-hidden="true">#</a> <em>数据库管理系统的概念与功能：</em></h4><ul><li><p><u>概述</u>：数据库管理系统一种系统软件，它通过<strong>结构化数据库语言</strong>提供基本的数据库操作功能，运行程序<strong>解析</strong>语言并<strong>执行</strong>对数据库的具体操作</p></li><li><p><u>提供数据库语言(SQL, Structured Query Language)和数据库维护程序</u></p><blockquote><p>主要从<strong>用户使用</strong>的角度讲解</p></blockquote><blockquote><p>数据库语言：DBMS提供的用于<strong>指示DBMS操作数据库</strong>的语言，相当于高级语言的一个或多个循环程序，可以嵌入高级语言（宿主语言）中使用</p></blockquote><ul><li><p>数据<strong>定义</strong>语言(DDL, Data Definition Language)：<strong>定义</strong>数据库中表的名称、标题（包括属性名及对属性值的要求）等<strong>格式</strong>，<strong>创建</strong>数据库和表</p><blockquote><p>也包括对数据库和表的删除、更改、查询</p></blockquote></li><li><p>数据<strong>操纵</strong>语言(DML, Data Manipulation Language)：对数据库中的表进行<strong>增加、删除、更改、检索</strong>等操作</p></li><li><p>数据<strong>控制</strong>语言(DCL, Data Control Language)：规定<strong>用户</strong>操作<strong>数据</strong>的<strong>权限</strong>，实施对数据库的<strong>控制</strong></p></li><li><p>数据库<strong>维护</strong>程序：提供对数据库维护的功能，包括转储、恢复、重组、性能检测、分析等，一般由DBA使用</p></li></ul></li><li><p><u>运行系统例行程序</u></p><blockquote><p>主要从<strong>系统实现</strong>的角度讲解</p></blockquote><blockquote><p>这些例行程序本质上是用<u><strong>形式<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>→</mo></mrow><annotation encoding="application/x-tex">\rarr</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="mrel">→</span></span></span></span>构造<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>→</mo></mrow><annotation encoding="application/x-tex">\rarr</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="mrel">→</span></span></span></span>自动化</strong></u>的思想<strong>实现</strong>数据库管理系统</p></blockquote><ul><li><strong>编译</strong>与执行控制程序 <ul><li>将数据库语言翻译成DBMS可执行的命令（DDL编译器、DML编译器、DCL编译器等）</li></ul></li><li><strong>查询</strong>优化与查询实现程序 <ul><li>提高数据库<strong>检索速度</strong></li><li>执行引擎<strong>实现查询</strong></li></ul></li><li><strong>存储与索引</strong>程序 <ul><li>提供数据在<strong>外存</strong>上的<strong>高效存取</strong>手段</li><li>实现存储管理器、缓冲区管理器、索引/文件和记录管理器等</li></ul></li><li><strong>事务</strong>处理程序 <ul><li>提高可靠性，避免并发错误</li></ul></li><li>各种<strong>控制</strong>程序 <ul><li>通信控制：提供网络环境下数据操作与传输手段</li><li>故障恢复、安全性和完整性控制</li><li>数据库维护和数据字典管理</li><li>应用程序接口</li></ul></li></ul><blockquote><p>详见数据库系统笔记仓库</p></blockquote></li></ul><h3 id="_1-2-数据库系统的抽象结构" tabindex="-1"><a class="header-anchor" href="#_1-2-数据库系统的抽象结构" aria-hidden="true">#</a> 1.2 数据库系统的抽象结构</h3><h4 id="三级模式两层映像" tabindex="-1"><a class="header-anchor" href="#三级模式两层映像" aria-hidden="true">#</a> <em>三级模式两层映像：</em></h4><ul><li><p>⭐️<u><strong>三级模式两层映像</strong>是数据库系统的标准结构</u></p></li><li><p><u>DBMS管理<strong>数据</strong>的三个层次</u>：</p><ul><li><p>外部层次/用户层次：某一<strong>用户</strong>能处理的数据，是全局数据的<strong>一部分</strong></p><blockquote><p>强调<strong>局部性</strong></p></blockquote></li><li><p>概念层次/逻辑层次：<strong>全局</strong>管理的数据，包含<strong>关联约束</strong></p><blockquote><p>强调<strong>全局性</strong></p></blockquote></li><li><p>内部层次/物理层次：<strong>存储</strong>在介质上的数据，包含存储路径、存储方式、存储索引等</p><blockquote><p><strong>强调物理存储</strong></p></blockquote></li></ul></li><li><p><u><strong>模式、视图、映像</strong>的概念</u>：</p><ul><li>模式(Schema)：对数据库中数据的<strong>结构性描述</strong>，表现数据的<strong>结构信息</strong></li><li>视图(View)/数据(Data)：某一种<strong>结构</strong>下数据库中的<strong>数据</strong></li><li>映像(Mapping)：一种结构到另一种结构的<strong>映射</strong></li></ul></li><li><p><strong><u>三级模式</u></strong>：</p><ul><li><p>局部/外部/外/用户/子 模式(External Schema)：某一<strong>用户</strong>能处理的<strong>数据的结构描述</strong></p><ul><li><p>局部/外部/外/用户/子 视图(External View)：某一用户能处理的<strong>数据</strong></p><blockquote><p>可以简称为<strong>视图</strong></p></blockquote></li></ul></li><li><p>全局/概念/逻辑 模式(Conceptual Schema)：<strong>全局</strong>管理的<strong>数据的结构描述</strong></p><blockquote><p>可以简称为<strong>模式</strong></p></blockquote><ul><li>全局/概念/逻辑 视图(Conceptual View)：<strong>全局</strong>管理的<strong>数据</strong></li></ul></li><li><p>内部/物理 模式(Internal Schema)：<strong>存储</strong>在介质上的<strong>数据的结构描述</strong></p><ul><li>内部/物理 视图(Internal View)：<strong>存储</strong>在介质上的<strong>数据</strong></li></ul></li></ul></li><li><p><strong><u>两层映像</u></strong>：</p><ul><li>E-C Mapping (External Schema-Conceptual Schema Mapping) <ul><li>概念：将<strong>外部模式</strong>映射为<strong>概念模式</strong>，从而实现<strong>概念视图</strong>向<strong>外部视图</strong>的转换</li><li>优点：便于<strong>用户</strong>观察和使用</li></ul></li><li>C-I Mapping (Conceptual Schema-Internal Schema Mapping) <ul><li>概念：将<strong>概念模式</strong>映射为<strong>内部模式</strong>，从而实现<strong>概念视图</strong>向<strong>内部视图</strong>的转换</li><li>优点：便于<strong>计算机</strong>进行存储和处理</li></ul></li></ul></li><li><p><u><strong>两个独立性</strong></u>：</p><blockquote><p>两个独立性是三级模式两层映像的重要优点</p></blockquote><ul><li>逻辑数据独立性：当<strong>概念模式</strong>变化时，只需改变<strong>E-C Mapping</strong>，无需改变<strong>外部模式</strong>，从而无需改变<strong>应用程序</strong></li><li>物理数据独立性：当<strong>内部模式</strong>变化时，只需改变<strong>C-I Mapping</strong>，无需改变<strong>概念模式</strong>，从而无需改变<strong>外部模式和应用程序</strong></li></ul><blockquote><p>三级模式两层映像本质上定义了一组<strong>接口规范</strong>，由用户按照接口定义三级模式，由DBMS程序自动实现两层映像，从而实现抽象、屏蔽变化</p></blockquote></li></ul><hr><h4 id="数据模型" tabindex="-1"><a class="header-anchor" href="#数据模型" aria-hidden="true">#</a> <em>数据模型：</em></h4><ul><li><p><u>数据模型的概念</u>：</p><ul><li>数据模型是<strong>对模式的抽象</strong></li><li>数据模型规定了<strong>模式统一描述方式</strong>，包括数据结构、操作和约束</li></ul></li><li><p><u>数据模型的常见种类</u>：</p><ul><li><p><strong><u>关系模型</u></strong>：</p><ul><li>以表的形式组织数据</li><li>规定所有模式都遵循<strong>表的数据结构</strong>，每个具体的模式都是拥有某些<strong>属性</strong>的表</li><li>规定对表形式<strong>数据的操作和约束</strong></li></ul></li><li><p><u>层次模型</u>：</p><ul><li><p>以树的形式组织数据</p></li><li><p>用<strong>实体型</strong>作为数据记录</p><blockquote><p>相当于树中的结点</p></blockquote></li><li><p>用<strong>系型</strong>表示数据之间的联系，由<strong>指针</strong>实现</p><blockquote><p>相当于树中的边</p></blockquote></li><li><p>规定所有模式都要描述<strong>实体型的含义</strong>并规定<strong>实体型之间的系型</strong></p></li></ul></li><li><p><u>网状模型</u>：</p><ul><li>以图的形式组织数据，同样有实体型和系型</li></ul></li></ul></li></ul><hr><h4 id="数据库系统的发展" tabindex="-1"><a class="header-anchor" href="#数据库系统的发展" aria-hidden="true">#</a> <em>数据库系统的发展：</em></h4><ul><li><p><u>四个阶段</u>：</p><ul><li><p>数据库技术探索</p></li><li><p>数据库技术确立</p></li><li><p>数据库技术成熟</p><blockquote><p>在该阶段提出了标准化数据库系统结构模型，也就是三级模式两层映像</p></blockquote></li><li><p>数据库技术深化发展</p></li></ul></li><li><p><u>从<strong>文件系统</strong>到<strong>数据库</strong></u>：</p><blockquote><p>详见数据库系统笔记仓库</p></blockquote><ul><li>文件系统 <ul><li>概述：文件系统是<strong>操作系统</strong>管理数据的方式，以<strong>记录</strong>为单位，提供各种存取方法</li><li>优点：用户不必考虑<strong>物理存储</strong>，不需要处理物理设备存取的复杂性</li><li>缺点： <ul><li>数据与程序：<strong>数据与程序</strong>耦合度较高，数据的组织和语义依赖于程序的具体实现</li><li>控制：共享差；不一致性高</li><li>联系：文件、记录之间<strong>联系性</strong>较差</li><li>冗余：冗余大</li></ul></li></ul></li><li>数据库 <ul><li>概述：由DBMS统一存取，维护数据组织形式及语义，以<strong>记录</strong>为单位，也可以<strong>数据项</strong>和<strong>记录集合</strong>为单位</li><li>优点： <ul><li>数据与程序：DBMS 数据及数据结构的定义和描述，让<strong>数据与应用程序</strong>解耦合，具有<strong>两个独立性</strong>，查询和统计高效</li><li>数据控制：<strong>统一的数据控制</strong>，共享性高；自动检查安全性、完整性、并发正确性</li><li>数据联系：文件（Table）、记录之间有关联</li><li>数据冗余：冗余小，易扩充</li></ul></li></ul></li></ul></li><li><p><u>从层次模型、网状模型数据库到<strong>关系模型数据库</strong></u>：</p><ul><li><p>第一代数据库系统：层次模型与网状模型数据库</p><ul><li>数据的<strong>结构</strong>：数据之间的关联关系由<strong>指针系统</strong>维护，结构描述复杂</li><li>数据的<strong>操作</strong>： <ul><li>数据检索操作依赖于<strong>指针系统</strong>指示的<strong>路径</strong></li><li>需要逐一记录操作，不能有效支持<strong>记录集合</strong>的操作</li></ul></li></ul><blockquote><p>重要的特点：<strong>指针</strong></p></blockquote></li><li><p>第二代数据库系统：关系模型数据库</p><ul><li>数据的<strong>结构</strong>：数据之间的关联关系由<strong>表</strong>的属性值来表征，结构描述简单</li><li>数据的<strong>操作</strong>： <ul><li>数据检索操作不依赖于路径或过程信息，支持<strong>非过程化的数据操作</strong></li><li>有效支持<strong>记录集合</strong>的操作</li></ul></li><li>理论：有较为完善的理论基础</li></ul><blockquote><p><strong>消除</strong>了网状、层次模型的<strong>指针</strong></p></blockquote></li></ul></li><li><p><u>从<strong>关系</strong>数据库到<strong>对象-关系</strong>数据库、<strong>面向对象</strong>数据库</u>：</p><ul><li>关系数据库 <ul><li>按<strong>行列</strong>组织数据，遵循<strong>关系第一范式</strong>，要求<strong>数据项不可再分</strong></li><li>支持各种<strong>关系运算</strong>，有较为完善的关系数据库设计理论</li></ul></li><li>对象-关系数据库（新一代数据库系统） <ul><li>通过<strong>行对象、列对象</strong>组织数据</li><li>可以不满足第一范式，支持<strong>复合属性</strong>（结构对象）和<strong>多值属性</strong>（聚集对象）</li></ul></li><li>面向对象数据库（新一代数据库系统） <ul><li>结合面向对象技术（O-O）和集合/聚集操作技术（SQL）</li><li>支持复杂数据类型，支持<strong>面向对象特性</strong></li></ul></li><li>XML数据库（新一代数据库系统） <ul><li>半结构化数据库</li><li>将<strong>数据</strong>与<strong>数据的语义</strong>合并在一起进行存储和管理</li><li>面向<strong>数据交换</strong></li></ul></li></ul></li><li><p><u>从单一数据库到多数据库互联</u>：</p><ul><li><strong>ODBC作为接口</strong>，规范程序书写，解开应用程序与数据库管理系统的耦合</li><li>实现多种多样数据库的<strong>开放式互联</strong></li></ul></li></ul><h2 id="_2-关系模型" tabindex="-1"><a class="header-anchor" href="#_2-关系模型" aria-hidden="true">#</a> 2 关系模型</h2><h3 id="_2-1-关系模型基础" tabindex="-1"><a class="header-anchor" href="#_2-1-关系模型基础" aria-hidden="true">#</a> 2.1 关系模型基础</h3><h4 id="关系模型三要素" tabindex="-1"><a class="header-anchor" href="#关系模型三要素" aria-hidden="true">#</a> <em>关系模型三要素：</em></h4><ul><li><u>基本结构</u>：Relation/Table <ul><li>描述数据库各种<strong>数据的基本结构</strong>形式</li></ul></li><li><u>基本操作</u>：Relation Operator <ul><li>描述数据库<strong>表之间</strong>可能发生的各种操作（<strong>关系运算</strong>）</li></ul></li><li><u>完整性约束</u>：Integrity Constraints <ul><li>描述<strong>基本结构与操作</strong>应当遵循的<strong>约束条件</strong></li></ul></li></ul><hr><h4 id="关系的数学定义" tabindex="-1"><a class="header-anchor" href="#关系的数学定义" aria-hidden="true">#</a> <em>关系的数学定义：</em></h4><ul><li><p><u>关系/表的定义</u></p><ul><li><p>域（Domain）：</p><ul><li>域的概念：一组<strong>相同数据类型值</strong>的集合</li><li>基数（Cardinality）：集合中的<strong>元素个数</strong></li><li>域在关系中的作用：是关系中某<strong>列的取值范围</strong></li></ul></li><li><p>笛卡尔积（Cartesian Product）：</p><ul><li><strong>元组</strong>和<strong>笛卡尔积</strong>：从<strong>一组域中各取一个元素</strong>构成的序对称为<strong>元组</strong>，所有这样可能的<strong>不重复的元组的集合</strong>称为这组域的<strong>笛卡尔积</strong></li><li>笛卡尔积的<strong>分量</strong>：一个元组中的某一元素</li><li>笛卡尔积的<strong>基数</strong>：笛卡尔积中元组的总数</li></ul></li><li><p>关系（Relation）</p><ul><li><p>关系的概念：一组域的<strong>笛卡尔积的子集</strong>，具有某方面意义的<strong>元组的集合</strong></p></li><li><p><strong>属性名</strong>：关系中每一列的名字</p><blockquote><p>关系的不同列可能来自同一域，用属性名加以区分</p></blockquote></li></ul></li><li><p>关系模式/表标题（Shcema/Head）</p><ul><li><p>关系模式的概念：关系的一种描述方式，即<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><msub><mi>A</mi><mn>1</mn></msub><mo>:</mo><msub><mi>D</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>A</mi><mn>2</mn></msub><mo>:</mo><msub><mi>D</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>A</mi><mi>n</mi></msub><mo>:</mo><msub><mi>D</mi><mi>n</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(A_1:D_1,A_2:D_2,...,A_n:D_n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></p><ul><li>R：关系的名字</li><li>A：属性</li><li>D：域（有时可以省略D）</li><li>n：关系的度/目（degree）</li></ul></li><li><p>DBMS中的关系模式：<code>关系模式(属性名 域名, ...)</code></p><ul><li><code>域名</code>的描述方式：<code>属性类型(长度)</code></li></ul><blockquote><p>举例：<code>Student(S# char(8), Sname char(10), Sage integer(9))</code></p></blockquote></li><li><p>关系模式与关系：</p><ul><li>关系模式是<strong>关系的结构</strong>，关系是关系模式下的<strong>数据集合</strong></li><li>同一关系模式下可以有很多关系</li></ul></li></ul></li></ul></li><li><p><u>关系/表的特性</u></p><ul><li><p>列的：</p><ul><li><strong>列同质</strong>：每一列中的分量来自<strong>同一域</strong></li><li><strong>属性名不冲突</strong>：关系模式中各<strong>属性名必须不同</strong>，对应的域可以相同</li><li><strong>第一范式</strong>：属性不可再分</li></ul></li><li><p>行的</p><ul><li><p><strong>元组不重复</strong>：关系中的任意两个元组不能完全相同，即不能<strong>每个分量都相同</strong></p><blockquote><p>现实应用中，<strong>表</strong>可能不完全遵守此特性</p></blockquote></li></ul></li><li><p>行列的：</p><ul><li><p><strong>行列位置互换性</strong>：用<strong>属性名</strong>区分列，用某<strong>属性值</strong>区分行，而不依靠位置区分</p><blockquote><p>仅仅是<strong>行列位置互换</strong>的两个关系是<strong>相同</strong>的关系</p></blockquote></li></ul></li></ul></li><li><p><u>特殊的属性(组)</u></p><ul><li><p><em>候选码/候选键（Candidate / Alternative Key）</em>：关系中的一个<strong>属性组</strong>，其值能<strong>唯一标识一个元组</strong>，若去掉其中任何一个属性则不能唯一标识元组</p><blockquote><p>具有“极小性”</p></blockquote></li><li><p><em>主码/主键（Primary Key）</em>：被选定为主要线索的候选码/候选键</p><blockquote><p>在关系中可以用<strong>下划线</strong>标识</p></blockquote></li><li><p><em>主属性与非主属性</em>：包含在任何一个<strong>候选码</strong>中的属性称为<strong>主属性</strong>，其他属性称为<strong>非主属性</strong></p></li><li><p><em>外码/外键（Foreign Key）</em>：与<strong>另一个关系的候选码</strong>相对应的<strong>属性组</strong></p><blockquote><p>两个关系通常是靠<strong>外码连接</strong>起来的。在关系后面可以额外说明哪些属性是外码</p></blockquote></li></ul></li></ul><hr><h4 id="关系模型中的完整性约束" tabindex="-1"><a class="header-anchor" href="#关系模型中的完整性约束" aria-hidden="true">#</a> <em>关系模型中的完整性约束：</em></h4><ul><li><strong>实体完整性</strong>：<strong>主键</strong>中的属性值不能为空</li><li><strong>参照完整性</strong>：若<strong>外键</strong>对应的候选键是<strong>主键</strong>，则其属性值要么与其对应<strong>主键的某一值</strong>相等，要么为<strong>空值</strong></li><li><strong>用户自定义</strong>的完整性：用户针对具体的应用环境定义的完整性约束条件 <ul><li>可以在域的基础上加约束</li><li>可以对属性或属性组联合约束</li></ul></li><li>DBMS对完整性的支持： <ul><li><strong>实体完整性和参照完整性</strong>由DBMS系统自动支持</li><li>用户可以<strong>自定义</strong>完整性约束</li><li>有<strong>更新</strong>操作发生时，<strong>DBMS自动检查</strong>是否符合完整性</li></ul></li></ul><h3 id="_2-2-关系代数" tabindex="-1"><a class="header-anchor" href="#_2-2-关系代数" aria-hidden="true">#</a> 2.2 关系代数</h3><h4 id="关系代数运算概述" tabindex="-1"><a class="header-anchor" href="#关系代数运算概述" aria-hidden="true">#</a> <em>关系代数运算概述：</em></h4><ul><li><p><strong>基本概念</strong>：基于关系代数的运算，就是<strong>基于集合的运算</strong></p></li><li><p><strong>输入输出</strong>：<strong>一个或多个关系</strong>为输入，输出<strong>一个新的关系</strong></p></li><li><p><strong>作用</strong>：一种<strong>抽象语言</strong>，是其他<strong>数据库语言</strong>如SQL的基础</p></li><li><p><strong>运算思想</strong>：先实现<strong>基本操作</strong>，再组合成<strong>扩展操作</strong></p><ul><li>下述扩展操作均可由5个基本操作组合完成</li></ul></li><li><p>关系代数运算的约束/<strong>并相容性</strong>：参与运算的关系<strong>属性数目（目数、度数）相同</strong>，对应<strong>属性的域相同</strong></p><ul><li>关系代数某些操作都要满足<strong>并相容性</strong></li></ul></li></ul><hr><h4 id="关系代数的基本操作" tabindex="-1"><a class="header-anchor" href="#关系代数的基本操作" aria-hidden="true">#</a> <em>关系代数的基本操作：</em></h4><ul><li><p>**并（Union）**操作</p><ul><li>概念：出现在<strong>关系R或关系S</strong>中的所有<strong>不重复</strong>元组集合 <ul><li>要满足并相容性</li></ul></li><li>数学描述：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo>∪</mo><mi>S</mi><mo>=</mo><mo stretchy="false">{</mo><mi>t</mi><mi mathvariant="normal">∣</mi><mi>t</mi><mo>∈</mo><mi>R</mi><mo>∨</mo><mi>t</mi><mo>∈</mo><mi>S</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">R\cup S=\{t|t\in R\vee t\in S\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">t</span><span class="mord">∣</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∨</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6542em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mclose">}</span></span></span></span>,t是元组</li></ul></li><li><p>**差（Difference）**操作</p><ul><li>概念：出现在关系R中但不出现在关系S中的所有元组集合 <ul><li>要满足并相容性</li></ul></li><li>数学描述：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo>−</mo><mi>S</mi><mo>=</mo><mo stretchy="false">{</mo><mi>t</mi><mi mathvariant="normal">∣</mi><mi>t</mi><mo>∈</mo><mi>R</mi><mo>∧</mo><mi>t</mi><mo mathvariant="normal">∉</mo><mi>S</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">R-S=\{t|t\in R\wedge t\notin S\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">t</span><span class="mord">∣</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mord"><span class="mrel">∈</span></span><span class="mord vbox"><span class="thinbox"><span class="llap"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="inner"><span class="mord"><span class="mord">/</span><span class="mspace" style="margin-right:0.0556em;"></span></span></span><span class="fix"></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mclose">}</span></span></span></span>,t是元组</li></ul></li><li><p>**广义笛卡尔积（Cartesian Product）**操作</p><ul><li><p>概念：关系R与关系S中元组所有可能的<strong>拼接</strong>构成的元组集合</p></li><li><p>数学描述：</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd class="mtr-glue"></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi>R</mi><mo>×</mo><mi>S</mi><mo>=</mo></mrow></mstyle></mtd><mtd class="mtr-glue"></mtd><mtd class="mml-eqn-num"></mtd></mtr><mtr><mtd class="mtr-glue"></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo stretchy="false">{</mo><mo>&lt;</mo><msub><mi>a</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>a</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>a</mi><mi>n</mi></msub><mo separator="true">,</mo><msub><mi>b</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>b</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>b</mi><mi>n</mi></msub><mo>&gt;</mo><mi mathvariant="normal">∣</mi></mrow></mstyle></mtd><mtd class="mtr-glue"></mtd><mtd class="mml-eqn-num"></mtd></mtr><mtr><mtd class="mtr-glue"></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>&lt;</mo><msub><mi>a</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>a</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>a</mi><mi>n</mi></msub><mo>&gt;</mo><mo>∈</mo><mi>R</mi><mtext>  </mtext><mo>∧</mo><mo>&lt;</mo><msub><mi>b</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>b</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>b</mi><mi>n</mi></msub><mo>&gt;</mo><mo>∈</mo><mi>S</mi><mo stretchy="false">}</mo></mrow></mstyle></mtd><mtd class="mtr-glue"></mtd><mtd class="mml-eqn-num"></mtd></mtr></mtable><annotation encoding="application/x-tex"> \begin{align} &amp;R\times S=\\ &amp;\{&lt;a_1,a_2,...,a_n,b_1,b_2,...,b_n&gt;|\\ &amp;&lt;a_1,a_2,...,a_n&gt;\in R~~\wedge&lt;b_1,b_2,...,b_n&gt;\in S\} \end{align} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.5em;vertical-align:-2em;"></span><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5em;"><span style="top:-4.5em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-3em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-1.5em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5em;"><span style="top:-4.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span></span></span><span style="top:-3.16em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mopen">{</span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">∣</span></span></span><span style="top:-1.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;∈</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace nobreak"> </span><span class="mspace nobreak"> </span><span class="mord">∧</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;∈</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mclose">}</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2em;"><span></span></span></span></span></span></span></span><span class="tag"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5em;"><span style="top:-4.5em;"><span class="pstrut" style="height:2.84em;"></span><span class="eqn-num"></span></span><span style="top:-3em;"><span class="pstrut" style="height:2.84em;"></span><span class="eqn-num"></span></span><span style="top:-1.5em;"><span class="pstrut" style="height:2.84em;"></span><span class="eqn-num"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2em;"><span></span></span></span></span></span></span></span></span></p></li><li><p>满足的性质：</p><ul><li>交换律</li><li>度数相加</li><li>基数相乘</li></ul></li><li><p>应用：<strong>检索多个表</strong></p></li></ul></li><li><p>**选择（Select）**操作</p><ul><li><p>概念：从关系R中选择出满足给定条件condition的<strong>元组</strong></p></li><li><p>数学描述：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>σ</mi><mrow><mi>c</mi><mi>o</mi><mi>n</mi></mrow></msub><mo stretchy="false">(</mo><mi>R</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">{</mo><mi>t</mi><mi mathvariant="normal">∣</mi><mi>t</mi><mo>∈</mo><mi>R</mi><mo>∧</mo><mi>c</mi><mi>o</mi><mi>n</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo>=</mo><mi>t</mi><mi>r</mi><mi>u</mi><mi>e</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\sigma_{con}(R)=\{t|t\in R\wedge con(t)=true\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">co</span><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">t</span><span class="mord">∣</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">u</span><span class="mord mathnormal">e</span><span class="mclose">}</span></span></span></span></p><ul><li><p><strong>条件 <code>con(t)</code><strong>的描述：由</strong>逻辑运算符</strong>连接<strong>比较表达式</strong>组成</p><ul><li>逻辑运算符：<code>and or not</code></li><li>比较表达式：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mtext> </mtext><mi>θ</mi><mtext> </mtext><mi>Y</mi></mrow><annotation encoding="application/x-tex">X~\theta~Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace nobreak"> </span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mspace nobreak"> </span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span></span></span></span>，其中X和Y是<strong>分量、常量或简单函数</strong>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span></span></span></span>是比较运算符，<code>&gt; &gt;= &lt; &lt;= = !=</code></li><li><strong>分量</strong>的描述：设<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><msub><mi>A</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>A</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msub><mi>A</mi><mi>n</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(A_1,A_2,...A_n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>，<code>t</code>是 <code>R</code>的元组，<code>t</code>的分量记为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo stretchy="false">[</mo><msub><mi>A</mi><mi>i</mi></msub><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">t[A_i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">t</span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span></span></span></span>或<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>A</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">A_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li></ul><blockquote><p>注意如果条件中涉及到字符串值，一定要加<strong>单引号</strong>，但字段名不用加，例如<code>姓名=&#39;张三&#39;</code></p></blockquote></li></ul></li></ul><blockquote><p>与SQL中常用的 <code>select</code>不同，这里选择的是<strong>元组</strong>，是行</p></blockquote></li><li><p>**投影（Project）**操作</p><ul><li>概念：关系R中属性包含在A中的<strong>列</strong>构成的关系 <ul><li>要去掉重复元组</li></ul></li><li>数学描述：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="normal">Π</mi><mrow><msub><mi>A</mi><mrow><mi>i</mi><mn>1</mn></mrow></msub><mo separator="true">,</mo><msub><mi>A</mi><mrow><mi>i</mi><mn>2</mn></mrow></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>A</mi><mrow><mi>i</mi><mi>k</mi></mrow></msub></mrow></msub><mo stretchy="false">(</mo><mi>R</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">{</mo><mo>&lt;</mo><mi>t</mi><mo stretchy="false">[</mo><msub><mi>A</mi><mrow><mi>i</mi><mn>1</mn></mrow></msub><mo stretchy="false">]</mo><mo separator="true">,</mo><mi>t</mi><mo stretchy="false">[</mo><msub><mi>A</mi><mrow><mi>i</mi><mn>2</mn></mrow></msub><mo stretchy="false">]</mo><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mi>t</mi><mo stretchy="false">[</mo><msub><mi>A</mi><mrow><mi>i</mi><mi>k</mi></mrow></msub><mo stretchy="false">]</mo><mo>&gt;</mo><mi mathvariant="normal">∣</mi><mi>t</mi><mo>∈</mo><mi>R</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\Pi_{A_{i1},A_{i2},...,A_{ik}}(R)=\{&lt;t[A_{i1}],t[A_{i2}],...,t[A_{ik}]&gt;|t\in R\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord">Π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathnormal mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight">...</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathnormal mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">ik</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">t</span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">t</span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">t</span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">ik</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mclose">}</span></span></span></span></li><li>应用：用户可以通过<strong>投影、选择操作</strong>查询关心的数据信息</li></ul><blockquote><p>对应了SQL中常用的 <code>select</code>，选择的是<strong>属性</strong>，是列</p><p>当然关系会去重，表可以不去</p></blockquote></li><li><p><strong>更名</strong>操作</p><ul><li><p>概念：为关系代数式中的<strong>同一个关系取别名</strong>以区分</p></li><li><p>数学描述：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>ρ</mi><msub><mi>R</mi><mn>1</mn></msub></msub><mo stretchy="false">(</mo><mi>R</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\rho_{R_1}(R)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0001em;vertical-align:-0.2501em;"></span><span class="mord"><span class="mord mathnormal">ρ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em;"><span style="top:-2.357em;margin-left:-0.0077em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2501em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mclose">)</span></span></span></span></p><blockquote><p>将关系R更名为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>R</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">R_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p></blockquote></li></ul></li></ul><hr><h4 id="关系代数的扩展操作" tabindex="-1"><a class="header-anchor" href="#关系代数的扩展操作" aria-hidden="true">#</a> <em>关系代数的扩展操作：</em></h4><ul><li><p>**交（Intersection）**操作</p><ul><li>概念：同时出现在<strong>关系R和关系S</strong>中的所有元组集合 <ul><li>要满足并相容性</li></ul></li><li>数学描述：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo>∩</mo><mi>S</mi><mo>=</mo><mo stretchy="false">{</mo><mi>t</mi><mi mathvariant="normal">∣</mi><mi>t</mi><mo>∈</mo><mi>R</mi><mo>∧</mo><mi>t</mi><mo>∈</mo><mi>S</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">R\cap S=\{t|t\in R\wedge t\in S\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∩</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">t</span><span class="mord">∣</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6542em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mclose">}</span></span></span></span>,t是元组</li><li>与基本操作的关系：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo>∩</mo><mi>S</mi><mo>=</mo><mi>R</mi><mo>−</mo><mo stretchy="false">(</mo><mi>R</mi><mo>−</mo><mi>S</mi><mo stretchy="false">)</mo><mo>=</mo><mi>S</mi><mo>−</mo><mo stretchy="false">(</mo><mi>S</mi><mo>−</mo><mi>R</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R\cap S=R-(R-S)=S-(S-R)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∩</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mclose">)</span></span></span></span></li></ul></li><li><p>**<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi><mo>−</mo></mrow><annotation encoding="application/x-tex">\theta-</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mord">−</span></span></span></span>连接（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi><mo>−</mo><mi>J</mi><mi>o</mi><mi>i</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">\theta-Join</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mord mathnormal">o</span><span class="mord mathnormal">in</span></span></span></span>）**操作：</p><ul><li><p>概念：关系R和关系S的笛卡尔积中，R中属性A与S中属性B满足<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span></span></span></span>条件的元组集合</p><blockquote><p>也叫 <em>内连接（Inner Join）</em></p></blockquote></li><li><p>数学描述：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo><munder><mo><mo>⋈</mo></mo><mrow><mi>A</mi><mtext> </mtext><mi>θ</mi><mtext> </mtext><mi>B</mi></mrow></munder></mo><mi>S</mi><mo>=</mo><msub><mi>σ</mi><mrow><mi>t</mi><mo stretchy="false">[</mo><mi>A</mi><mo stretchy="false">]</mo><mtext> </mtext><mi>θ</mi><mtext> </mtext><mi>s</mi><mo stretchy="false">[</mo><mi>B</mi><mo stretchy="false">]</mo></mrow></msub><mo stretchy="false">(</mo><mi>R</mi><mo>×</mo><mi>S</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R\underset{A~\theta~B}\bowtie S=\sigma_{t[A]~\theta~s[B]}(R\times S)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.4404em;vertical-align:-0.7571em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.505em;"><span style="top:-2.3429em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">A</span><span class="mspace nobreak mtight"><span class="mtight"> </span></span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">θ</span><span class="mspace nobreak mtight"><span class="mtight"> </span></span><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">⋈</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7571em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1052em;vertical-align:-0.3552em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.5198em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mopen mtight">[</span><span class="mord mathnormal mtight">A</span><span class="mclose mtight">]</span><span class="mspace nobreak mtight"><span class="mtight"> </span></span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">θ</span><span class="mspace nobreak mtight"><span class="mtight"> </span></span><span class="mord mathnormal mtight">s</span><span class="mopen mtight">[</span><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span><span class="mclose mtight">]</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3552em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mclose">)</span></span></span></span></p><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><msub><mi>A</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>A</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>A</mi><mi>n</mi></msub><mo stretchy="false">)</mo><mo separator="true">,</mo><mtext> </mtext><mi>A</mi><mo>∈</mo><mo stretchy="false">{</mo><msub><mi>A</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>A</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>A</mi><mi>n</mi></msub><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">R(A_1,A_2,...,A_n),~A\in\{A_1,A_2,...,A_n\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace nobreak"> </span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">}</span></span></span></span></li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">(</mo><msub><mi>B</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>B</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>B</mi><mi>n</mi></msub><mo stretchy="false">)</mo><mo separator="true">,</mo><mtext> </mtext><mi>B</mi><mo>∈</mo><mo stretchy="false">{</mo><msub><mi>B</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>B</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>B</mi><mi>n</mi></msub><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">S(B_1,B_2,...,B_n),~B\in\{B_1,B_2,...,B_n\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0502em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0502em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0502em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace nobreak"> </span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0502em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0502em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0502em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">}</span></span></span></span></li><li>t是关系R中的元组，s是关系S中的元组</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span></span></span></span>是比较运算符，属性A和属性B具有可比性</li></ul></li><li><p>应用：与投影、选择操作联用</p></li><li><p>DBMS的实现：DBMS可以<strong>直接进行连接操作</strong>，降低中间结果的保存量，而不必先形成笛卡尔积</p></li></ul></li><li><p>**等值连接（Equi-Join）**操作</p><ul><li><p>概念：关系R和关系S的笛卡尔积中，R中属性A与S中属性B<strong>相等</strong>的元组集合</p><ul><li><p>一种特殊的<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi><mo>−</mo></mrow><annotation encoding="application/x-tex">\theta-</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mord">−</span></span></span></span>连接</p><blockquote><p>是一种内连接</p></blockquote></li><li><p><strong>合并</strong>参与等值连接的<strong>重复的属性列</strong>，因为值完全相同，保留一列即可</p><blockquote><p>普通的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span></span></span></span> 连接是不需要合并的</p></blockquote></li></ul></li><li><p>数学描述：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo><munder><mo><mo>⋈</mo></mo><mrow><mi>A</mi><mo>=</mo><mtext> </mtext><mi>B</mi></mrow></munder></mo><mi>S</mi><mo>=</mo><msub><mi>σ</mi><mrow><mi>t</mi><mo stretchy="false">[</mo><mi>A</mi><mo stretchy="false">]</mo><mo>=</mo><mi>s</mi><mo stretchy="false">[</mo><mi>B</mi><mo stretchy="false">]</mo></mrow></msub><mo stretchy="false">(</mo><mi>R</mi><mo>×</mo><mi>S</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R\underset{A=~B}\bowtie S=\sigma_{t[A]=s[B]}(R\times S)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.4327em;vertical-align:-0.7493em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.505em;"><span style="top:-2.3507em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">A</span><span class="mrel mtight">=</span><span class="mspace nobreak mtight"><span class="mtight"> </span></span><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">⋈</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7493em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1052em;vertical-align:-0.3552em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.5198em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mopen mtight">[</span><span class="mord mathnormal mtight">A</span><span class="mclose mtight">]</span><span class="mrel mtight">=</span><span class="mord mathnormal mtight">s</span><span class="mopen mtight">[</span><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span><span class="mclose mtight">]</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3552em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mclose">)</span></span></span></span></p></li></ul></li><li><p><strong>自然连接</strong>操作</p><ul><li><p>概念：关系R和关系S的笛卡尔积中，<strong>相同属性组B</strong>上的值都<strong>相等</strong>的元组集合</p><ul><li><p>一种特殊的等值连接</p><blockquote><p>是一种内连接</p></blockquote></li><li><p>要求关系R和关系S有相同的属性组B</p></li><li><p><strong>合并</strong>参与等值连接的<strong>重复的属性列</strong>，因为值完全相同，保留一列即可</p></li></ul></li><li><p>数学描述：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo>⋈</mo><mi>S</mi><mo>=</mo><msub><mi>σ</mi><mrow><mi>t</mi><mo stretchy="false">[</mo><mi>B</mi><mo stretchy="false">]</mo><mo>=</mo><mi>s</mi><mo stretchy="false">[</mo><mi>B</mi><mo stretchy="false">]</mo></mrow></msub><mo stretchy="false">(</mo><mi>R</mi><mo>×</mo><mi>S</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R\bowtie S=\sigma_{t[B]=s[B]}(R\times S)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6883em;vertical-align:-0.005em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⋈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1052em;vertical-align:-0.3552em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.5198em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mopen mtight">[</span><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span><span class="mclose mtight">]</span><span class="mrel mtight">=</span><span class="mord mathnormal mtight">s</span><span class="mopen mtight">[</span><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span><span class="mclose mtight">]</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3552em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mclose">)</span></span></span></span></p></li></ul></li><li><p>**除（Division）**操作</p><ul><li><p>前提条件：关系S的属性集是关系R的属性集的<strong>真子集</strong></p></li><li><p>概念：关系R除关系S，得到关系中，<strong>属性集</strong>是关系R属性集<strong>差</strong>关系S属性集，<strong>元组</strong>是与S中每一个元组<strong>连接</strong>后的新元组都在关系R中的元组</p></li><li><p>数学描述：</p><ul><li><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo>÷</mo><mi>S</mi><mo>=</mo><mo stretchy="false">{</mo><mi>t</mi><mi mathvariant="normal">∣</mi><mi>t</mi><mo>∈</mo><msub><mi mathvariant="normal">Π</mi><mrow><mi>R</mi><mo>−</mo><mi>S</mi></mrow></msub><mo stretchy="false">(</mo><mi>R</mi><mo stretchy="false">)</mo><mo>∧</mo><mi mathvariant="normal">∀</mi><mi>u</mi><mo>∈</mo><mi>S</mi><mo stretchy="false">(</mo><mi>t</mi><mi>u</mi><mo>∈</mo><mi>R</mi><mo stretchy="false">)</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">R\div S=\{t|t\in\Pi_{R-S}(R)\wedge\forall u\in S(tu\in R)\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">÷</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">t</span><span class="mord">∣</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord">Π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span><span class="mbin mtight">−</span><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.0391em;"></span><span class="mord">∀</span><span class="mord mathnormal">u</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mord mathnormal">u</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mclose">)}</span></span></span></span></p></li><li><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo>÷</mo><mi>S</mi><mo>=</mo><msub><mi mathvariant="normal">Π</mi><mrow><mi>R</mi><mo>−</mo><mi>S</mi></mrow></msub><mo stretchy="false">(</mo><mi>R</mi><mo stretchy="false">)</mo><mo>−</mo><msub><mi mathvariant="normal">Π</mi><mrow><mi>R</mi><mo>−</mo><mi>S</mi></mrow></msub><mo stretchy="false">(</mo><mo stretchy="false">(</mo><msub><mi mathvariant="normal">Π</mi><mrow><mi>R</mi><mo>−</mo><mi>S</mi></mrow></msub><mo stretchy="false">(</mo><mi>R</mi><mo stretchy="false">)</mo><mo>×</mo><mi>S</mi><mo stretchy="false">)</mo><mo>−</mo><mi>R</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R\div S=\Pi_{R-S}(R)-\Pi_{R-S}((\Pi_{R-S}(R)\times S)-R)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">÷</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord">Π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span><span class="mbin mtight">−</span><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord">Π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span><span class="mbin mtight">−</span><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mopen">((</span><span class="mord"><span class="mord">Π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span><span class="mbin mtight">−</span><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mclose">)</span></span></span></span></p><blockquote><p>如何记忆？</p><ul><li>差运算保证并相容性，所以投影的是 <code>R-S</code>中的属性</li><li>通过 <code>差R</code>的操作找到连接后不在R中的元组</li></ul></blockquote></li></ul></li><li><p>应用：带有“全部”、“所有”字样的检索</p><blockquote><p>“全部”体现在**“商”与S中元组连接全部都在R中**</p></blockquote></li></ul></li><li><p>**外连接（Outer-Join）**操作</p><ul><li><p>概念：两个关系连接时，若无匹配元组，则与<strong>全为空值</strong>的次关系元组连接</p><blockquote><p>是对<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi><mo>−</mo></mrow><annotation encoding="application/x-tex">\theta-</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mord">−</span></span></span></span>连接（Inner-Join）的扩展</p></blockquote></li><li><p>外连接的形式：外连接 = 自然连接（或<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi><mo>−</mo></mrow><annotation encoding="application/x-tex">\theta-</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mord">−</span></span></span></span>连接）+ 失配元组（与<strong>全空元组</strong>的连接）</p><ul><li><p>左外连接 = 自然连接（或<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi><mo>−</mo></mrow><annotation encoding="application/x-tex">\theta-</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mord">−</span></span></span></span>连接）+ 左侧表失配元组（与右侧表全空元组的连接）</p><blockquote><p>Left Outer Join, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>=</mo><mo>⋈</mo></mrow><annotation encoding="application/x-tex">=\bowtie</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.51em;vertical-align:-0.005em;"></span><span class="mrel">=⋈</span></span></span></span></p></blockquote></li><li><p>右外连接 = 自然连接（或<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi><mo>−</mo></mrow><annotation encoding="application/x-tex">\theta-</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mord">−</span></span></span></span>连接）+ 右侧表失配元组（与左侧表全空元组的连接）</p><blockquote><p>Right Outer Join, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>⋈</mo><mo>=</mo></mrow><annotation encoding="application/x-tex">\bowtie=</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.51em;vertical-align:-0.005em;"></span><span class="mrel">⋈=</span></span></span></span></p></blockquote></li><li><p>全外连接 = 自然连接（或<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi><mo>−</mo></mrow><annotation encoding="application/x-tex">\theta-</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mord">−</span></span></span></span>连接）+ 两侧表失配元组（与对侧表全空元组的连接）</p><blockquote><p>Full Outer Join, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>=</mo><mo>⋈</mo><mo>=</mo></mrow><annotation encoding="application/x-tex">=\bowtie=</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.51em;vertical-align:-0.005em;"></span><span class="mrel">=⋈=</span></span></span></span></p></blockquote></li></ul></li><li><p>应用：避免连接时丢失元组信息</p></li></ul></li></ul><hr><h4 id="关系代数操作的应用经验" tabindex="-1"><a class="header-anchor" href="#关系代数操作的应用经验" aria-hidden="true">#</a> <em>关系代数操作的应用经验：</em></h4><ul><li>基本操作的书写思路/集合思维 <ol><li>先写出 <code>R</code>，即找出要操作的关系</li><li>写<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>σ</mi><mrow><mi>c</mi><mi>o</mi><mi>n</mi></mrow></msub><mo stretchy="false">(</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\sigma_{con}()</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">co</span><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mclose">)</span></span></span></span>，即进行<strong>选择</strong>运算保留所需的行/元组</li><li>写<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="normal">Π</mi><mrow><msub><mi>A</mi><mrow><mi>i</mi><mn>1</mn></mrow></msub><mo separator="true">,</mo><msub><mi>A</mi><mrow><mi>i</mi><mn>2</mn></mrow></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>A</mi><mrow><mi>i</mi><mi>k</mi></mrow></msub></mrow></msub><mo stretchy="false">(</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\Pi_{A_{i1},A_{i2},...,A_{ik}}()</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord">Π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathnormal mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight">...</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathnormal mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">ik</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mclose">)</span></span></span></span>，即进行投影运算保留所需的的列/属性</li><li>进行<strong>并差积交</strong>运算</li></ol></li><li>扩展操作相关思路 <ul><li>涉及<strong>多表</strong>时才需要考虑扩展操作</li><li>在<strong>连接</strong>步骤中，依次尝试下列操作，直到满足需求 <ol><li>自然连接</li><li>等值连接与<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi><mo>−</mo></mrow><annotation encoding="application/x-tex">\theta-</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mord">−</span></span></span></span>连接</li><li>广义笛卡尔积</li></ol></li></ul></li></ul><h2 id="_3-database-language-sql" tabindex="-1"><a class="header-anchor" href="#_3-database-language-sql" aria-hidden="true">#</a> 3 Database Language - SQL</h2><h3 id="_3-1-basic-sql" tabindex="-1"><a class="header-anchor" href="#_3-1-basic-sql" aria-hidden="true">#</a> 3.1 Basic SQL</h3><h4 id="overview" tabindex="-1"><a class="header-anchor" href="#overview" aria-hidden="true">#</a> <em>Overview：</em></h4><ul><li><u>Proposal &amp; Development:</u><ol><li>1975 - 1979: SQL</li><li>1992: <strong>SQL-92 / SQL2</strong><ul><li><strong>Standard</strong> relation database language</li></ul></li><li>1999: SQL-99 / SQL3 <ul><li>Object-oriented: row object and column object ...</li></ul></li></ol></li><li><u>Functions:</u><ul><li><p><em>DDL</em>: <code>Create</code>, <code>Alter</code>, <code>Drop</code></p><ul><li>Definition and removal of schema, including <strong>DB, table, view, index, integrity constraint, ...</strong></li></ul></li><li><p><em>DML</em>: <code>Insert</code>, <code>Delete</code>, <code>Update</code>, <code>Select</code></p><ul><li><strong>Query, update, aggregate operation</strong></li></ul></li><li><p><em>DCL</em>: <code>Grant</code>, <code>Revoke</code></p><ul><li><strong>Security</strong> control</li></ul></li></ul></li></ul><hr><h4 id="sql-manipulating-database" tabindex="-1"><a class="header-anchor" href="#sql-manipulating-database" aria-hidden="true">#</a> <em>SQL Manipulating Database：</em></h4><ul><li><p><u>Set up database:</u></p><ol><li><p>Create database:</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">database</span> databaseName<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>Specify database:</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">use</span> databaseName<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>Many DBMS allows operating multiple databases</li></ul></li><li><p><strong>Create table</strong>:</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> tableName<span class="token punctuation">(</span>
    columnName dataType <span class="token punctuation">[</span><span class="token keyword">Default</span> defaultValue<span class="token operator">|</span><span class="token boolean">NULL</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>ColumnIntegrityConstraints<span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token punctuation">,</span> columnName dataType <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token punctuation">,</span> TableIntegrityConstraints<span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><code>dataType</code>: <code>char(n) varchar(n) int numeric(p, q) real date time ...</code></p><ul><li><code>Varchar(n)</code></li><li><code>Number(n)</code></li></ul></li><li><p><code>Default</code></p></li><li><p><code>ColumnIntegrityConstraints</code></p></li><li><p><code>TableIntegrityConstraints</code></p></li></ul><blockquote><p><code>create data</code> can define <strong>schema, integrity constraints and physical storage</strong></p></blockquote></li><li><p>(Append records into table: explained below ...)</p></li><li><p>(Close database: <code>close databaseName</code>)</p></li></ol></li><li><p><u>Amend database:</u></p><ul><li><p>Amend table:</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> tableName
<span class="token keyword">add</span> columnName dataType<span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token operator">|</span>
<span class="token keyword">drop</span> columnName<span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token operator">|</span>
<span class="token keyword">modify</span> columnName dataType<span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Add new columns</li><li>Drop integrity constraints (explained below ...)</li><li>Modify definition of columns</li></ul></li><li><p>Drop table:</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">Drop</span> <span class="token keyword">Table</span> tableName <span class="token punctuation">[</span><span class="token keyword">Restrict</span><span class="token operator">|</span><span class="token keyword">Cascade</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><p><code>drop</code> revoke the whole table, including <strong>schema, records and views</strong> from this table</p><blockquote><p>But <code>delete from</code> only deletes the records</p></blockquote></li><li><p><code>Restrict</code>: deny dropping if referred by foreign key, view, ...</p></li></ul></li><li><p>Drop database:</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">database</span> databaseName
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul></li></ul><hr><h4 id="sql-manipulating-table" tabindex="-1"><a class="header-anchor" href="#sql-manipulating-table" aria-hidden="true">#</a> <em>SQL Manipulating Table：</em></h4><ul><li><p><u>Single table query:</u></p><ul><li><p>Simple query:</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">Select</span> columnName<span class="token punctuation">[</span><span class="token punctuation">,</span> columnName <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token keyword">From</span> tableName
<span class="token punctuation">[</span><span class="token keyword">Where</span> queryCondition<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>Math description:</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>π</mi><mrow><mi>c</mi><mi>o</mi><mi>l</mi><mi>u</mi><mi>m</mi><mi>n</mi><mi>N</mi><mi>a</mi><mi>m</mi><mi>e</mi><mo stretchy="false">[</mo><mo separator="true">,</mo><mi>c</mi><mi>o</mi><mi>l</mi><mi>u</mi><mi>m</mi><mi>n</mi><mi>N</mi><mi>a</mi><mi>m</mi><mi>e</mi><mo stretchy="false">]</mo></mrow></msub><mo stretchy="false">(</mo><msub><mi>σ</mi><mrow><mi>q</mi><mi>u</mi><mi>e</mi><mi>r</mi><mi>y</mi><mi>C</mi><mi>o</mi><mi>n</mi><mi>d</mi><mi>i</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi></mrow></msub><mo stretchy="false">(</mo><mi>t</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi><mi>N</mi><mi>a</mi><mi>m</mi><mi>e</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex"> \pi_{columnName[,columnName]}(\sigma_{queryCondition}(tableName)) </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1052em;vertical-align:-0.3552em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.5198em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">co</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">mn</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span><span class="mord mathnormal mtight">am</span><span class="mord mathnormal mtight">e</span><span class="mopen mtight">[</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">co</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">mn</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span><span class="mord mathnormal mtight">am</span><span class="mord mathnormal mtight">e</span><span class="mclose mtight">]</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3552em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">ery</span><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mord mathnormal">ab</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mord mathnormal">am</span><span class="mord mathnormal">e</span><span class="mclose">))</span></span></span></span></span></p></li><li><p>Clause: <code>Select From Where</code> and components after are called as their <strong>clauses</strong></p><blockquote><p>The whole query statement can be a <strong>subquery</strong> in a larger statement’s clause</p></blockquote></li><li><p><code>queryCondition</code>: Just like conditions below <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>σ</mi></mrow><annotation encoding="application/x-tex">\sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span></span></span></span>, use <code>and or not</code>, notice <strong>operator precedence</strong> and comprehension of natural <strong>semantic</strong> meaning</p></li></ul></li><li><p>Duplicate removal query:</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">Select</span> <span class="token keyword">DISTINCT</span> columnName<span class="token punctuation">[</span><span class="token punctuation">,</span> columnName <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token keyword">From</span> tableName
<span class="token punctuation">[</span><span class="token keyword">Where</span> queryCondition<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><code>DISTINCT</code>: DBMS allow <strong>duplicate</strong> records in <strong>query result</strong>, which can be removed by <code>DISTINCT</code></p><blockquote><p><strong>Duplicate</strong> records in <strong>table</strong> can be removed by <code>Primary key</code> and <code>Unique</code></p></blockquote></li></ul></li><li><p>Sorting query:</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">Select</span> columnName<span class="token punctuation">[</span><span class="token punctuation">,</span> columnName <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token keyword">From</span> tableName
<span class="token punctuation">[</span><span class="token keyword">Where</span> queryCondition<span class="token punctuation">]</span>
<span class="token keyword">order</span> <span class="token keyword">by</span> columnName <span class="token punctuation">[</span><span class="token keyword">asc</span><span class="token operator">|</span><span class="token keyword">desc</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>order by</code>: Query result are sorted by <code>columnName</code> according to specified order, <strong>ascending</strong> if omitted</li></ul></li><li><p>Fuzzy query:</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">Select</span> columnName<span class="token punctuation">[</span><span class="token punctuation">,</span> columnName <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token keyword">From</span> tableName
<span class="token keyword">Where</span> columnName <span class="token punctuation">[</span><span class="token operator">not</span> <span class="token punctuation">]</span><span class="token operator">like</span> <span class="token string">&quot;regex&quot;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><code>%</code>: Match zero to multiple characters</p></li><li><p><code>_</code>: Match one character</p><blockquote><p>Sometimes we use two <code>_</code> to represent one Chinese character</p></blockquote></li><li><p><code>\</code>: escape character</p></li></ul></li></ul></li><li><p><u>Multi-table joint query:</u></p><ul><li><p>Simple join:</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">Select</span> columnName<span class="token punctuation">[</span><span class="token punctuation">,</span> columnName <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token keyword">From</span> tableName1<span class="token punctuation">,</span> tableName2<span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">Where</span> queryCondition<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>Math description:</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>π</mi><mrow><mi>c</mi><mi>o</mi><mi>l</mi><mi>u</mi><mi>m</mi><mi>n</mi><mi>N</mi><mi>a</mi><mi>m</mi><mi>e</mi><mo stretchy="false">[</mo><mo separator="true">,</mo><mi>c</mi><mi>o</mi><mi>l</mi><mi>u</mi><mi>m</mi><mi>n</mi><mi>N</mi><mi>a</mi><mi>m</mi><mi>e</mi><mo stretchy="false">]</mo></mrow></msub><mo stretchy="false">(</mo><msub><mi>σ</mi><mrow><mi>q</mi><mi>u</mi><mi>e</mi><mi>r</mi><mi>y</mi><mi>C</mi><mi>o</mi><mi>n</mi><mi>d</mi><mi>i</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi></mrow></msub><mo stretchy="false">(</mo><mi>t</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi><mi>N</mi><mi>a</mi><mi>m</mi><mi>e</mi><mn>1</mn><mo>×</mo><mi>t</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi><mi>N</mi><mi>a</mi><mi>m</mi><mi>e</mi><mn>2</mn><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex"> \pi_{columnName[,columnName]}(\sigma_{queryCondition}(tableName1\times tableName2)) </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1052em;vertical-align:-0.3552em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.5198em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">co</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">mn</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span><span class="mord mathnormal mtight">am</span><span class="mord mathnormal mtight">e</span><span class="mopen mtight">[</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">co</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">mn</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span><span class="mord mathnormal mtight">am</span><span class="mord mathnormal mtight">e</span><span class="mclose mtight">]</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3552em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">ery</span><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mord mathnormal">ab</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mord mathnormal">am</span><span class="mord mathnormal">e</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal">ab</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mord mathnormal">am</span><span class="mord mathnormal">e</span><span class="mord">2</span><span class="mclose">))</span></span></span></span></span></p></li><li><p><code>columnName</code>: <code>tableName.attributeName</code> can be used to specify an <strong>attribute</strong> in <code>select</code></p></li><li><p><code>queryCondition</code>: <strong>Join condition</strong> should be contained</p><blockquote><p>But in this way, <strong>join condition screening</strong> will be done after <strong>Cartesian product</strong> in <code>from</code>, which has lower efficiency than <code>join</code> keyword</p></blockquote></li></ul></li><li><p>Table alias:</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">Select</span> columnName<span class="token punctuation">[</span><span class="token punctuation">,</span> columnName <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token keyword">From</span> tableName1 <span class="token punctuation">[</span><span class="token keyword">as</span><span class="token punctuation">]</span> alias1<span class="token punctuation">,</span> tableName2 <span class="token punctuation">[</span><span class="token keyword">as</span><span class="token punctuation">]</span> alias2<span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">Where</span> queryCondition<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Alias can be used to <strong>specify attributes</strong>, simplify long table name</li></ul></li></ul></li><li><p><u>Table update:</u></p><ul><li><p>Append records into table:</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> tableName<span class="token punctuation">[</span><span class="token punctuation">(</span>columnName<span class="token punctuation">[</span><span class="token punctuation">,</span> columnName <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token keyword">values</span><span class="token punctuation">(</span>columnValue<span class="token punctuation">[</span><span class="token punctuation">,</span> columnValue <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> tableName<span class="token punctuation">[</span><span class="token punctuation">(</span>columnName<span class="token punctuation">[</span><span class="token punctuation">,</span> columnName <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
subquery<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>columnValue</code>s should stay the same order as <code>columnName</code>s <ul><li>If <code>columnName</code>s are omitted, <code>columnValue</code>s should stay the same order as all the columns in table</li></ul></li><li><code>subquery</code> is the query result of a query statement</li><li><strong>Integrity constraint</strong>: DBMS automatically check integrity constraints and prevent inserting operations against constraints</li></ul></li><li><p>Delete records from table:</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">Delete</span> <span class="token keyword">from</span> tableName
<span class="token punctuation">[</span><span class="token keyword">Where</span> deleteCondition<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>deleteCondition</code>: If omitted, all the records will be deleted</li><li><strong>Integrity constraint</strong>: DBMS automatically check integrity constraints and prevent deleting operations against constraints</li></ul></li><li><p>Update <strong>attribute value</strong> of records in table:</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">Update</span> tableName
<span class="token keyword">Set</span> columnName <span class="token operator">=</span> expression <span class="token operator">|</span> <span class="token punctuation">(</span>subquery<span class="token punctuation">)</span>
	<span class="token punctuation">[</span><span class="token punctuation">,</span> columnName <span class="token operator">=</span> expression <span class="token operator">|</span> <span class="token punctuation">(</span>subquery<span class="token punctuation">)</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">Where</span> updateCondition<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>updateCondition</code>: If omitted, all the records will be updated</li><li><strong>Integrity constraint</strong>: DBMS automatically check integrity constraints and prevent updating operations against constraints</li></ul></li></ul></li></ul><h3 id="_3-2-extended-sql-view" tabindex="-1"><a class="header-anchor" href="#_3-2-extended-sql-view" aria-hidden="true">#</a> 3.2 Extended SQL &amp; View</h3><h4 id="subquery-in-where" tabindex="-1"><a class="header-anchor" href="#subquery-in-where" aria-hidden="true">#</a> <em>Subquery in Where：</em></h4><ul><li><p><u>Overview:</u></p><ul><li><p>Definition: <strong><code>select</code> statement</strong> in <strong><code>where</code> clause</strong>, part of <strong>query condition</strong></p></li><li><p>Function: Return query result set , implement various <strong>set operations</strong></p><ul><li>Set member qualification</li><li>Set comparison</li><li>Set cardinality test</li></ul></li><li><p>Subquery <strong>correlation</strong>: <code>select</code> statement with subquery can be divided into the <strong>inner and outer layers</strong></p><ul><li><p>Non-related subquery: The inner query is independent</p><blockquote><p>In this case, the inner query executes only once, which is more efficient</p></blockquote></li><li><p>Related subquery: The inner query is dependent on <strong>values of the outer query</strong></p><blockquote><p>In this case, the inner query executes multiple times along with <strong>outer query loop</strong> for the <strong>dependent values</strong>.</p><p>It’s better to try <strong>transforming</strong> related subquery into non-related subquery by adjust <strong>query condition</strong> to outer</p></blockquote></li></ul></li></ul></li><li><p><code>[not] in</code></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">Where</span> expression <span class="token punctuation">[</span><span class="token operator">not</span> <span class="token punctuation">]</span><span class="token operator">in</span> <span class="token punctuation">(</span>subquery<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><p><code>expression</code>: a <strong>column name</strong>, a <strong>constant</strong> or their arithmetic operations</p></li><li><p>Semantics: Judge whether the <code>expression</code>&#39;s value is in the <code>subquery</code>&#39;s result set</p><blockquote><p>Naturally it’s like multiple <code>or</code></p></blockquote></li></ul></li><li><p><code>θ-some/all</code></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">Where</span> expression θ <span class="token keyword">some</span> <span class="token punctuation">(</span>subquery<span class="token punctuation">)</span>
<span class="token keyword">Where</span> expression θ <span class="token keyword">all</span> <span class="token punctuation">(</span>subquery<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><code>θ</code>: comparison operator like <code>&lt; &gt; &lt;= &gt;= = &lt;&gt;</code></p></li><li><p>Semantics: Judge whether the <code>expression</code>&#39;s value satisfy <code>θ</code> comparison with <strong>someone or everyone</strong> of subquery result set</p><blockquote><p>The <strong>existential</strong> quantifier or the <strong>universal</strong> quantifier.</p><p>Equivalency:</p><ul><li><code>= some</code> is equivalent to <code>in</code></li><li><code>&lt;&gt; all</code> is equivalent to <code>not in</code></li></ul></blockquote></li></ul></li><li><p><code>[not] exists</code></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">Where</span> <span class="token punctuation">[</span><span class="token operator">not</span> <span class="token punctuation">]</span><span class="token keyword">exists</span> <span class="token punctuation">(</span>subquery<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><p>Semantics: Judge whether the <code>subquery</code>&#39;s result set is empty</p><blockquote><p>Always used in “all” condition, which can be explained by “It does <strong>not exist</strong> that there is <strong>something not</strong> doing or done”, <strong>double negation</strong></p></blockquote></li><li><p>Subquery train of thoughts：</p><ol><li>Find the projected <strong>attributes</strong> and related <strong>tables</strong> for the outer layer</li><li><strong>Divide query conditions</strong>. If subquery is required, find new projected attributes and related tables layer by layer, and then continue dividing query conditions</li></ol></li></ul></li></ul><hr><h4 id="grouping-aggregation" tabindex="-1"><a class="header-anchor" href="#grouping-aggregation" aria-hidden="true">#</a> <em>Grouping &amp; Aggregation：</em></h4><ul><li><p><u>Arithmetic operations &amp; Aggregation functions:</u></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">Select</span> columnName<span class="token operator">|</span>expression<span class="token operator">|</span>agfunc<span class="token punctuation">(</span>columnName<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">,</span> columnName<span class="token operator">|</span>expression<span class="token operator">|</span>agfunc<span class="token punctuation">(</span>columnName<span class="token punctuation">)</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token keyword">From</span> tableName1<span class="token punctuation">[</span><span class="token punctuation">,</span> tableName2 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">Where</span> queryCondition<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>agfunc</code>: Aggregation function like <code>Count() Sum() AVG() Max() Min()</code></li><li><code>expression</code>: a <strong>column name</strong>, a <strong>constant</strong> or their <strong>arithmetic</strong> operations including <strong>aggregation</strong> functions</li></ul></li><li><p><u>Grouping query:</u></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">Select</span> columnName<span class="token operator">|</span>expression<span class="token operator">|</span>agfunc<span class="token punctuation">(</span>columnName<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">,</span> columnName<span class="token operator">|</span>expression<span class="token operator">|</span>agfunc<span class="token punctuation">(</span>columnName<span class="token punctuation">)</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token keyword">From</span> tableName1<span class="token punctuation">[</span><span class="token punctuation">,</span> tableName2 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">Where</span> queryCondition<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">Group</span> <span class="token keyword">by</span> groupCondition<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>groupCondition</code>: one or multiple column name(s) divided by <code>,</code></li><li>Semantics: Classify query result sets by some attribute. Records having <strong>the same attribute value</strong> are grouped into the same group, so SQL can process multiple groups at the same time.</li></ul></li><li><p><u>Grouping filter:</u></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">Select</span> columnName<span class="token operator">|</span>expression<span class="token operator">|</span>agfunc<span class="token punctuation">(</span>columnName<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">,</span> columnName<span class="token operator">|</span>expression<span class="token operator">|</span>agfunc<span class="token punctuation">(</span>columnName<span class="token punctuation">)</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token keyword">From</span> tableName1<span class="token punctuation">[</span><span class="token punctuation">,</span> tableName2 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">Where</span> queryCondition<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">Group</span> <span class="token keyword">by</span> groupCondition <span class="token punctuation">[</span><span class="token keyword">Having</span> groupFilterCondition<span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><code>Having</code> clause: Also called grouping filter clause, appear with <code>Group by</code>, filter out <strong>groups</strong> satisfying the <code>groupFilterCondition</code></p><blockquote><p>Only grouping related attribute(s), constants and their arithmetic operations are allowed in <code>groupFilterCondition</code></p></blockquote><blockquote><p>Aggregation operations are not allowed in <code>Where</code> clause, for <strong>groups are not formed</strong> when <code>Where</code> clause is executing</p></blockquote></li></ul></li></ul><hr><h4 id="relation-algebra-operations" tabindex="-1"><a class="header-anchor" href="#relation-algebra-operations" aria-hidden="true">#</a> <em>Relation Algebra Operations：</em></h4><ul><li><p><u><code>union intersect except</code>:</u></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>subquery <span class="token punctuation">[</span><span class="token keyword">Union</span> <span class="token punctuation">[</span><span class="token keyword">All</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token keyword">Intersect</span> <span class="token punctuation">[</span><span class="token keyword">All</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token keyword">Except</span><span class="token punctuation">[</span><span class="token keyword">All</span><span class="token punctuation">]</span> subquery<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><p><code>subquery</code>: A <code>select</code> statement</p></li><li><p><code>All</code>: If not set, “duplicate” records will be removed.</p><p>Assume that a same record appears <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span> times in <code>subquery1</code>, appears <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> times in <code>subquery2</code>, then:</p><ul><li>Appears <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mo>+</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">m+n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> times in <code>subquery1 Union All subquery2</code></li><li>Appears <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mi>m</mi><mo separator="true">,</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">min(m,n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">min</span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> times in <code>subquery1 Intersect All subquery2</code></li><li>Appears <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy="false">(</mo><mn>0</mn><mo separator="true">,</mo><mi>m</mi><mo>−</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">max(0, m-n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">ma</span><span class="mord mathnormal">x</span><span class="mopen">(</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> times in <code>subquery1 Except All subquery2</code></li></ul></li><li><p>Semantics: Relation algebra operation between subquery results</p><blockquote><p>Sometimes <strong>relation algebra operations</strong> can be substituted by <strong>logic operations and subquery</strong>:</p><ul><li><code>union</code> and <code>or</code>: <code>union</code> have a <strong>better expression</strong> ability than <code>or</code></li><li><code>intersect</code> and <code>and</code>: <code>intersect</code> has the same expression ability with <code>and</code>, but is <strong>more concise</strong></li><li><code>except</code> and <code>not in | not exists</code>: <code>except</code> has the same expression ability, but is <strong>more concise</strong></li></ul></blockquote></li></ul></li><li><p><u>Null value problem</u>:</p><ul><li><p>Null value detection:</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">Where</span> columnName <span class="token operator">is</span> <span class="token punctuation">[</span><span class="token operator">not</span><span class="token punctuation">]</span> <span class="token boolean">null</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><p><code>null</code>: Judge whether the attribute value is null</p><blockquote><p>Notice that it can’t be written as <code>= null</code>, for <code>null</code> can’t be operated simply</p></blockquote></li></ul></li><li><p>Null value operations:</p><ul><li><code>null</code> doesn’t satisfy any <strong>query condition</strong> except <code>is [not] null</code></li><li>The value of arithmetic expression is null if <code>null</code> is involved in operation</li><li>The value of logic expression is <code>false</code> if <code>null</code> is involved in operation</li><li>The aggregation function ignores <code>null</code> except <code>count(*)</code></li></ul></li></ul></li><li><p><u><code>Join</code> / Extension of <code>From</code>:</u></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">Select</span> columnName<span class="token punctuation">[</span><span class="token punctuation">,</span> columnName <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token keyword">From</span> tableName1 
	<span class="token punctuation">[</span><span class="token keyword">natural</span><span class="token punctuation">]</span>
	<span class="token punctuation">[</span><span class="token keyword">Inner</span> <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token keyword">Left</span><span class="token operator">|</span><span class="token keyword">Right</span><span class="token operator">|</span><span class="token keyword">Full</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">Outer</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token keyword">Join</span> tableName2
	<span class="token punctuation">[</span><span class="token keyword">On</span> joinCondition <span class="token operator">|</span> <span class="token keyword">Using</span><span class="token punctuation">(</span>columnName1<span class="token punctuation">[</span><span class="token punctuation">,</span> ColumnName2 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">Where</span> queryCondition<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>Join semantics:</p><ul><li><p><code>Inner Join</code>: namely <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi><mo>−</mo><mi>J</mi><mi>o</mi><mi>i</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">\theta-Join</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mord mathnormal">o</span><span class="mord mathnormal">in</span></span></span></span> in relation algebra.</p><blockquote><p>The default <code>Join</code> is <code>Inner Join</code></p></blockquote></li><li><p><code>Left Outer Join</code>: namely <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mi>e</mi><mi>f</mi><mi>t</mi><mtext> </mtext><mi>O</mi><mi>u</mi><mi>t</mi><mi>e</mi><mi>r</mi><mo>−</mo><mi>J</mi><mi>o</mi><mi>i</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">Left~Outer-Join</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">L</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">t</span><span class="mspace nobreak"> </span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.02778em;">er</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mord mathnormal">o</span><span class="mord mathnormal">in</span></span></span></span> in relation algebra.</p></li><li><p><code>Right Outer Join</code>: namely <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mtext> </mtext><mi>O</mi><mi>u</mi><mi>t</mi><mi>e</mi><mi>r</mi><mo>−</mo><mi>J</mi><mi>o</mi><mi>i</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">Right~Outer-Join</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">h</span><span class="mord mathnormal">t</span><span class="mspace nobreak"> </span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.02778em;">er</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mord mathnormal">o</span><span class="mord mathnormal">in</span></span></span></span> in relation algebra.</p></li><li><p><code>Full Outer Join</code>: namely <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mi>u</mi><mi>l</mi><mi>l</mi><mtext> </mtext><mi>O</mi><mi>u</mi><mi>t</mi><mi>e</mi><mi>r</mi><mo>−</mo><mi>J</mi><mi>o</mi><mi>i</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">Full~Outer-Join</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mord mathnormal">u</span><span class="mord mathnormal" style="margin-right:0.01968em;">ll</span><span class="mspace nobreak"> </span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.02778em;">er</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mord mathnormal">o</span><span class="mord mathnormal">in</span></span></span></span> in relation algebra.</p></li></ul></li><li><p>Join conditions:</p><ul><li><code>Natural Join [Using(...)]</code>: namely <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mi>a</mi><mi>t</mi><mi>u</mi><mi>r</mi><mi>a</mi><mi>l</mi><mo>−</mo><mi>J</mi><mi>o</mi><mi>i</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">Natural-Join</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mord mathnormal">u</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mord mathnormal">o</span><span class="mord mathnormal">in</span></span></span></span> in relation algebra. <ul><li><code>Using(columnName1[, columnName2 ...])</code>: partial <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mi>a</mi><mi>t</mi><mi>u</mi><mi>r</mi><mi>a</mi><mi>l</mi><mo>−</mo><mi>J</mi><mi>o</mi><mi>i</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">Natural-Join</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mord mathnormal">u</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mord mathnormal">o</span><span class="mord mathnormal">in</span></span></span></span> with only subset of common attributes specified by <code>columnName</code></li></ul></li><li><code>On joinConidition</code>: simple join conditions</li></ul></li></ul></li></ul><hr><h4 id="view" tabindex="-1"><a class="header-anchor" href="#view" aria-hidden="true">#</a> <em>View：</em></h4><ul><li><p>Concept &amp; Structure:</p><ul><li><p>Concept: <strong>View</strong> in SQL is the <strong>data</strong> of <em>external schema(external view)</em>, including <em>external schema</em> and <em>E-C mapping</em>, used to <strong>simplify query</strong></p><blockquote><p><strong>Table</strong> in SQL is <em>conceptual schema</em></p></blockquote></li><li><p>Structure: <strong>View</strong> in SQL actually just stores <em>E-C mapping</em> rather than including the data</p><blockquote><p><strong>Table</strong> in SQL stores the real data</p></blockquote></li></ul></li><li><p>Definition &amp; Dropping</p><ul><li><p>Definition:</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">Create</span> <span class="token keyword">View</span> viewName <span class="token punctuation">[</span>columnName<span class="token punctuation">[</span><span class="token punctuation">,</span> columnName <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
	<span class="token keyword">as</span> subquery <span class="token punctuation">[</span><span class="token keyword">with</span> <span class="token keyword">check</span> <span class="token keyword">option</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>columnName</code>: Default is attribute name in subquery result, or specify all the names explicitly</li><li><code>with check option</code>: Whether to check whether <strong>records satisfy conditions in subquery</strong> when <code>insert/update/delete</code> about view</li></ul></li><li><p>Drop:</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">Drop</span> <span class="token keyword">View</span> viewName
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul></li><li><p>Query &amp; Update</p><ul><li><p>Query: Use view just like table in SQL for query</p><ul><li>Query in view in ultimately transformed into query in table, combining statements of creating view and query</li></ul></li><li><p>Update: It’s complex, and should follow some rules. Cases where update is not allowed:</p><ul><li>View statement contains <code>agfunc</code>, <code>Group by</code> or arithmetic operations</li><li>View statement contains <code>Distinct</code></li><li>View statement about a single table doesn’t contain the primary key</li></ul><blockquote><p>Update in view in ultimately transformed into update in table</p></blockquote></li></ul></li></ul><h3 id="_3-3-database-integrity" tabindex="-1"><a class="header-anchor" href="#_3-3-database-integrity" aria-hidden="true">#</a> 3.3 Database Integrity</h3><h4 id="overview-1" tabindex="-1"><a class="header-anchor" href="#overview-1" aria-hidden="true">#</a> <em>Overview：</em></h4><ul><li><p><u><strong>Concept</strong> of Integrity &amp; <strong>Reasons</strong> of Integrity Problem:</u></p><ul><li><p>DB Integrity: A <strong>DB feature</strong> ensured by DBMS, that DB should maintain <strong>correctness, validity and consistency</strong> anytime</p><ul><li><p>Broad integrity: semantic integrity, concurrence control, security control, DB failure recovery</p></li><li><p>Narrow integrity: specifically <strong>semantic integrity</strong>, for which DBMS has special <strong>integrity management</strong> mechanism and programs</p><blockquote><p>For example, integrity constraints in relation model:</p><ul><li>Entity integrity</li><li>Referential integrity</li><li>User-Defined integrity</li></ul></blockquote></li></ul></li><li><p>DB Integrity problem <strong>reasons</strong>:</p><ul><li><strong>Wrong DB operations</strong>, like input error, operating error, program processing error</li></ul></li><li><p>Effect of DB <strong>Integrity management</strong>:</p><ul><li><p>Prevent and avoid <strong>unreasonable data</strong> in DB</p></li><li><p><strong>DBMS</strong> should prevent unreasonable semantics <strong>automatically</strong></p><blockquote><p>It is <strong>automation</strong> that DBMS should focus on, rather than user notice the integrity problems every time</p></blockquote></li></ul></li></ul></li><li><p><u>Implementation of Integrity:</u></p><ul><li><p><strong>Integrity constraint conditions/rules</strong>: <code>Integrity Constraint ::= (O, P, A, R)</code></p><ul><li>O: data set, <strong>constrained object</strong></li><li>P: predicate condition, <strong>what constraint</strong></li><li>A: trigger condition, <strong>when to check</strong> (default is when updating)</li><li>R: response action, <strong>how to do when unsatisfied</strong> (default is to decline)</li></ul><p>For <code>O</code>, check <code>P</code> when <code>A</code>, do <code>R</code> if unsatisfied</p><blockquote><p>Defined by SQL-DDL.</p><p><code>O</code> and <code>P</code> need to be defined explicitly, <code>A</code> and <code>R</code> can be default</p></blockquote></li><li><p><strong>Integrity control programs</strong>: DBMS automatically check integrity constraints to ensure semantic integrity when <strong>updating DB</strong></p></li></ul></li><li><p><u>Classification of Integrity:</u></p><ul><li><p>Classified by constraint <strong>object</strong>:</p><ul><li><strong>Domain</strong> integrity constraint: Check <strong>one column</strong> when updating</li><li><strong>Relation</strong> integrity constraint: Check <strong>multiple columns</strong> or the whole <strong>records</strong> (maybe between tables)</li></ul></li><li><p>Classified by constraint <strong>source</strong>:</p><ul><li><p><strong>Structure</strong> constraint: from model constraint</p><blockquote><p>For example, <strong>functional dependency constraint</strong>, primary key constraint, foreign key constraint,</p></blockquote></li><li><p><strong>Content</strong> constraint: from user’s constraint, user-defined constraint</p><blockquote><p>For example, caring about <strong>value range</strong></p></blockquote></li></ul></li><li><p>Classified by constraint <strong>status</strong>:</p><ul><li><p><strong>Static</strong> constraint: satisfied by DB <strong>anytime</strong></p><blockquote><p>SQL support:</p><ul><li><strong>Column</strong> integrity (domain integrity constraint)</li><li><strong>Table</strong> integrity (relation integrity constraint)</li></ul></blockquote></li><li><p><strong>Dynamic</strong> constraint: satisfied by DB when <strong>transforming from one status to another</strong></p><blockquote><p>SQL support:</p><ul><li><strong>Trigger</strong></li></ul></blockquote></li></ul></li></ul></li></ul><hr><h4 id="static-integrity-in-sql" tabindex="-1"><a class="header-anchor" href="#static-integrity-in-sql" aria-hidden="true">#</a> <em>Static Integrity in SQL：</em></h4><ul><li><p>SQL <strong>static</strong> constraint model:</p></li><li><p><code>Create Table</code>:</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">Create</span> <span class="token keyword">Table</span><span class="token punctuation">(</span>
    colName dataType <span class="token punctuation">[</span><span class="token keyword">Default</span> defaultVal<span class="token operator">|</span><span class="token boolean">NULL</span><span class="token punctuation">]</span>
    	<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token keyword">Constraint</span> colConsName<span class="token punctuation">]</span> ColumnIntegrityConstraints<span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token punctuation">,</span> colName <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token keyword">Constraint</span> tblConsName<span class="token punctuation">]</span> TableIntegrityConstraints<span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><code>ColumnIntegrityConstraints</code>: divided by <code></code> (space)</p><ul><li><p><code>Primary key</code>: primary key constraint, <strong>only one</strong> per table, check unique and null when update</p></li><li><p><code>Unique</code>: uniqueness constraint, namely <strong>candidate / alternative key</strong>, multiple per table</p></li><li><p><code>Not Null</code>: not null constraint, allow <strong>no null value</strong> in this column</p></li><li><p><code>Check(searchCondition)</code>:</p></li><li><p><code>References tableName[(colName)]</code>: full or partial primary key in referred table</p></li><li><p><code>On Delete|Update No Action|Cascade|Set Null</code> when updating referred table, not the table begin created</p><blockquote><p>If <code>insert</code> or <code>update</code> the table being created and the value is non-existent in the referred table, <strong>deny</strong></p></blockquote></li></ul></li><li><p><code>TableIntegrityConstraints</code></p><ul><li><code>,</code>:</li><li><code>Primary Key</code></li><li><code>Unique</code></li><li><code>Check</code></li><li><code>Foreign Key(colName, ...) References tableName</code>:</li></ul></li></ul></li><li><p><code>Alter Table</code>:</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">Alter</span> <span class="token keyword">Table</span> tblName
	<span class="token keyword">Add</span> <span class="token punctuation">(</span>colName <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token keyword">Constraint</span> colConsName<span class="token punctuation">]</span> tblCons<span class="token punctuation">]</span><span class="token punctuation">)</span>
	<span class="token operator">|</span> <span class="token keyword">Add</span> <span class="token keyword">Constraint</span> tblConsName
	<span class="token operator">|</span> <span class="token keyword">Drop</span> <span class="token keyword">Column</span> colName <span class="token punctuation">[</span><span class="token keyword">Cascade</span><span class="token operator">|</span><span class="token keyword">Restrict</span><span class="token punctuation">]</span>
	<span class="token operator">|</span> <span class="token keyword">Drop</span> <span class="token keyword">Constraint</span> consName <span class="token punctuation">[</span><span class="token keyword">Cascade</span><span class="token operator">|</span><span class="token keyword">Restrict</span><span class="token punctuation">]</span>
	<span class="token operator">|</span> <span class="token keyword">Drop</span> <span class="token keyword">Primary</span> <span class="token keyword">Key</span>
	<span class="token operator">|</span> <span class="token keyword">Modify</span> <span class="token punctuation">(</span>colName <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token keyword">Constraint</span> colConsName<span class="token punctuation">]</span> tblCons<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>Add</code></li><li><code>Drop</code></li><li><code>Modify</code></li><li><code>Restrict</code>: deny dropping if referred</li></ul></li><li><p><code>Create Assersion</code></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">Create</span> Assertion assertinoName <span class="token keyword">Check</span> predicate
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>Semantics: cross tables</li><li>Effects:</li></ul></li></ul><hr><h4 id="dynamic-integrity-in-sql" tabindex="-1"><a class="header-anchor" href="#dynamic-integrity-in-sql" aria-hidden="true">#</a> <em>Dynamic Integrity in SQL：</em></h4><ul><li><p>SQL <strong>dynamic</strong> constraint model:</p></li><li><p><strong>Trigger</strong> overview</p></li><li><p><code>create trigger</code></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code></code></pre><div class="line-numbers" aria-hidden="true"></div></div><ul><li>Event</li><li>Alias</li></ul></li></ul><h3 id="_3-4-database-security" tabindex="-1"><a class="header-anchor" href="#_3-4-database-security" aria-hidden="true">#</a> 3.4 Database Security</h3><h4 id="overview-2" tabindex="-1"><a class="header-anchor" href="#overview-2" aria-hidden="true">#</a> <em>Overview：</em></h4><ul><li><p><u>Concept of Security</u>:</p><ul><li>security grade</li></ul></li><li><p><u>Classification of Security:</u></p><ul><li><strong>Discretionary</strong> security mechanism:</li><li><strong>Enforcing</strong> security mechanism:</li><li>Inference control mechanism</li><li>Data encryption storage mechanism</li></ul></li><li><p><u>DBA responsibilities and obligations about DB security:</u></p></li></ul><hr><h4 id="database-discretionary-security-mechanism" tabindex="-1"><a class="header-anchor" href="#database-discretionary-security-mechanism" aria-hidden="true">#</a> <em>Database Discretionary Security Mechanism：</em></h4><ul><li><p><u>Concept:</u></p></li><li><p><u>DBMS <strong>Implementation</strong> of discretionary security:</u></p></li><li><p><u>Discretionary security access <strong>rule</strong> and implementation <strong>form</strong>:</u></p><ul><li>Rule: <code>AccessRule ::= (S, O, t, P)</code><ul><li><code>S</code> can do <code>t</code> to <code>O</code> if <code>P</code></li></ul></li><li>Forms: <ul><li>Storage matrix</li><li>View</li></ul></li></ul></li><li><p><u><strong>Process</strong> and <strong>problems</strong> of discretionary security <strong>authorization</strong>:</u></p><ul><li>Process</li><li>Problems <ul><li>Range</li><li>Revoking</li></ul></li></ul></li></ul><hr><h4 id="sql-implementation-of-discretionary-security" tabindex="-1"><a class="header-anchor" href="#sql-implementation-of-discretionary-security" aria-hidden="true">#</a> <em>SQL Implementation of Discretionary Security：</em></h4><ul><li><p><strong>User</strong> and <strong>authority</strong> in SQL</p><ul><li>Three levels of user <ul><li>relation</li><li>account</li><li>super</li></ul></li><li>Three levels of authority <ul><li>select <code>&lt;-&gt;</code> relation</li><li>modify <code>&lt;-&gt;</code> relation</li><li>create <code>&lt;-&gt;</code> account</li></ul></li></ul></li><li><p><code>grant</code></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">Grant</span> <span class="token keyword">All</span> <span class="token keyword">Privileges</span><span class="token operator">|</span>priv<span class="token punctuation">[</span><span class="token punctuation">,</span> priv <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
	<span class="token keyword">On</span> <span class="token punctuation">[</span><span class="token keyword">Table</span><span class="token punctuation">]</span> tblName<span class="token operator">|</span>viewName
	<span class="token keyword">To</span> <span class="token keyword">Public</span><span class="token operator">|</span><span class="token keyword">user</span><span class="token operator">-</span>id<span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token keyword">user</span><span class="token operator">-</span>id <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
	<span class="token punctuation">[</span><span class="token keyword">With</span> <span class="token keyword">Grant</span> <span class="token keyword">Option</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>View</li></ul></li><li><p><code>revoke</code></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">Revoke</span> <span class="token keyword">All</span> <span class="token keyword">Privileges</span><span class="token operator">|</span>priv<span class="token punctuation">[</span><span class="token punctuation">,</span> priv <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
	<span class="token keyword">On</span> tblName<span class="token operator">|</span>viewName
	<span class="token keyword">From</span> <span class="token keyword">Public</span><span class="token operator">|</span><span class="token keyword">user</span><span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token keyword">user</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><blockquote><p>Footnote: enforcing security mechanism</p></blockquote><h2 id="_4-data-modeling" tabindex="-1"><a class="header-anchor" href="#_4-data-modeling" aria-hidden="true">#</a> 4 Data Modeling</h2><h3 id="_4-1-three-worlds-with-levels-of-abstraction" tabindex="-1"><a class="header-anchor" href="#_4-1-three-worlds-with-levels-of-abstraction" aria-hidden="true">#</a> 4.1 Three Worlds With Levels of Abstraction</h3><h4 id="real-world" tabindex="-1"><a class="header-anchor" href="#real-world" aria-hidden="true">#</a> <em>Real world:</em></h4><ul><li><p><u>Abstraction level</u>: No Abstraction</p></li><li><p><u>Key</u> of this level: <strong>Demand</strong></p><ul><li><p><strong>Comprehension and Expression</strong> of demand</p></li><li><p>The kinds of demand:</p><ul><li><p><strong>Data</strong> demand</p><blockquote><p><strong>Data demand</strong> is even more essential</p></blockquote></li><li><p><strong>Processing Rules</strong> demand</p></li></ul></li></ul></li></ul><hr><h4 id="conceptual-information-world" tabindex="-1"><a class="header-anchor" href="#conceptual-information-world" aria-hidden="true">#</a> <em>Conceptual / Information world:</em></h4><ul><li><p><u>Ways abstracting</u> from <em>real world</em> to <em>conceptual world</em>: <strong>Data Modeling</strong></p></li><li><p><u>Abstraction level</u>: <strong>Conceptual</strong> Level</p></li><li><p><u>Key</u> of this level: <strong>Conceptual Data Model</strong></p><ul><li><p><strong>Concept</strong> of conceptual model: the model <strong>expressing information world</strong></p><blockquote><p>Conceptual model is short for conceptual data model</p></blockquote></li><li><p><strong>Independence</strong>: independent of <strong>computer system</strong></p></li><li><p>Representing the <strong>essential relationship of information</strong></p></li></ul></li></ul><hr><h4 id="data-computer-world" tabindex="-1"><a class="header-anchor" href="#data-computer-world" aria-hidden="true">#</a> <em>Data / Computer world:</em></h4><ul><li><u>Ways abstracting</u> from <em>conceptual world</em> to <em>computer world</em>: <strong>Database Design</strong></li><li><u>Abstraction level</u>: <strong>Implement</strong> Level</li><li><u>Key</u> of this level: <strong>Data Model</strong><ul><li><strong>Concept</strong> of data model: the model <strong>expressing computer world</strong></li><li><strong>Independence</strong>: independent of <strong>physical system</strong></li></ul></li><li>Two levels in computer world itself: <ul><li><strong>Logic level</strong>, which contains <strong>data model</strong></li><li><strong>Physical level</strong>, arrived from logic level</li></ul></li></ul><blockquote><p>Some thoughts about abstraction:</p><ul><li>Comprehend, Distinguish, Name, Express</li><li>Type &amp; Value <ul><li>Methodology and methodology application</li><li>Model and meta model</li></ul></li></ul></blockquote><h3 id="_4-2-entity-relationship-model" tabindex="-1"><a class="header-anchor" href="#_4-2-entity-relationship-model" aria-hidden="true">#</a> 4.2 Entity-Relationship Model</h3><h4 id="e-r-conceptual-framework" tabindex="-1"><a class="header-anchor" href="#e-r-conceptual-framework" aria-hidden="true">#</a> <em>E-R Conceptual Framework:</em></h4><ul><li><u>Basic view:</u></li><li><u>Entity:</u></li><li><u>Attribute &amp; Keyword:</u></li><li><u>Relationship:</u><ul><li>Degree:</li><li>Cardinality &amp; Role: <ul><li>1:m, specially 1:0 of 1:1</li><li>m:n, specially 0:0 of 1:1</li></ul></li></ul></li></ul><hr><h4 id="chen-method" tabindex="-1"><a class="header-anchor" href="#chen-method" aria-hidden="true">#</a> <em>Chen Method:</em></h4><ul><li><u>Basic components:</u><ul><li>Entity:</li><li>Attribute: <ul><li>Multi-value</li><li>Exported</li><li>Composite</li></ul></li><li>Keyword: <ul><li>Composite</li><li>Multi</li></ul></li><li>Relationship: <ul><li>Cardinality</li></ul></li><li>Connectivity <ul><li>Connection between entity and attribute(keyword)</li><li>Connection between relationship and entity</li><li>Connection between relationship and attribute(keyword)</li></ul></li></ul></li><li><u>Cardinality &amp; Role:</u></li><li><u>Data modeling steps with E-R diagram:</u></li></ul><hr><h4 id="crow-s-foot-method" tabindex="-1"><a class="header-anchor" href="#crow-s-foot-method" aria-hidden="true">#</a> <em>Crow’s Foot Method:</em></h4><ul><li><u>Basic components:</u><ul><li>Entity</li><li>Attribute</li><li>Keyword</li><li>Relationship</li></ul></li><li><u>Cardinality &amp; Role:</u></li></ul><h3 id="_4-3-idef1x" tabindex="-1"><a class="header-anchor" href="#_4-3-idef1x" aria-hidden="true">#</a> 4.3 IDEF1x</h3><h4 id="conceptual-framework" tabindex="-1"><a class="header-anchor" href="#conceptual-framework" aria-hidden="true">#</a> <em>Conceptual Framework:</em></h4><ul><li><u>Concept:</u></li><li><u>IDEF1x vs E-R diagram:</u></li><li><u>Components:</u><ul><li>Relationship <ul><li>1:m attribute inheritance partial or full</li><li>m:n intersection entity</li></ul></li></ul></li></ul><hr><h4 id="entity-and-attribute" tabindex="-1"><a class="header-anchor" href="#entity-and-attribute" aria-hidden="true">#</a> <em>Entity and Attribute:</em></h4><ul><li><u>Entity:</u><ul><li>Identifier-Independent entity</li><li>Identifier-Dependent entity</li><li>Intersection entity</li></ul></li><li><u>Attribute:</u><ul><li>Primary key</li><li>Candidate / Alternate key</li><li>Foreign key</li><li>Non-prime attribute</li></ul></li></ul><hr><h4 id="connection-relationship" tabindex="-1"><a class="header-anchor" href="#connection-relationship" aria-hidden="true">#</a> <em>Connection Relationship:</em></h4><ul><li><u>Identifying connection relationship:</u></li><li><u>Non-identifying connection relationship:</u></li></ul><hr><h4 id="non-specific-relationship" tabindex="-1"><a class="header-anchor" href="#non-specific-relationship" aria-hidden="true">#</a> <em>Non-Specific Relationship:</em></h4><ul><li><u>Concept:</u></li><li><u>Intersection / Associative entity:</u><ul><li>Identifying or Non-identifying</li><li>Only one or multiple times / Whether to add sequence number in PK</li></ul></li></ul><hr><h4 id="categorization-relationship" tabindex="-1"><a class="header-anchor" href="#categorization-relationship" aria-hidden="true">#</a> <em>Categorization Relationship:</em></h4><ul><li><u>Concept:</u></li><li><u>Specialization &amp; Generalization:</u></li><li><u>Perfect &amp; Imperfect categorization:</u></li></ul><h2 id="_5-database-design" tabindex="-1"><a class="header-anchor" href="#_5-database-design" aria-hidden="true">#</a> 5 Database Design</h2><h3 id="_5-1-process-of-database-design" tabindex="-1"><a class="header-anchor" href="#_5-1-process-of-database-design" aria-hidden="true">#</a> 5.1 Process of Database Design</h3><blockquote><ol><li>Demand analysis</li><li>...</li></ol></blockquote><h4 id="demand-analysis" tabindex="-1"><a class="header-anchor" href="#demand-analysis" aria-hidden="true">#</a> <em>Demand Analysis：</em></h4><ul><li><p><u>Goals:</u> comprehend <strong>data</strong> demand and data <strong>process</strong> demand</p></li><li><p><u>Submissions:</u> demand analysis report</p><ul><li>“source” list</li><li>“attr” list</li><li>attr define list</li></ul></li><li><p><u>Steps:</u></p></li></ul><hr><h4 id="conceptual-database-design" tabindex="-1"><a class="header-anchor" href="#conceptual-database-design" aria-hidden="true">#</a> <em>Conceptual Database Design:</em></h4><ul><li><p><u>Goals:</u> <strong>abstract</strong> source info, discover nature <strong>relationship</strong></p></li><li><p><u>Submissions:</u> conceptual database design report</p><ul><li><p>conceptual model E-R / IDEF1x</p><ul><li>entity level, key level, complete</li></ul></li><li><p>“entity” list</p></li><li><p>“entity” define list</p></li><li><p>“entity-relationship” matrix</p></li><li><p>“entity-attr” matrix</p></li></ul></li><li><p><u>Steps:</u></p><ul><li>Local and global thought: entity relationship attr</li><li>Conflicts: attr structure name</li></ul></li></ul><hr><h4 id="logical-database-design" tabindex="-1"><a class="header-anchor" href="#logical-database-design" aria-hidden="true">#</a> <em>Logical Database Design:</em></h4><ul><li><p><u>Goals:</u> describe conceptual database with logical <strong>scheme</strong></p></li><li><p><u>Submissions:</u> logical database design report</p><ul><li>scheme</li><li>external and global mode</li></ul></li><li><p><u>Transform:</u></p><ul><li>E-R <ul><li>Composite &amp; Multi-valued attribute</li><li>Identifier-dependent entity</li><li>1:m relationship: multiple add fk for the other entity and ak for <strong>relationship’s attr</strong></li><li>m:n relationship</li><li>Categorization relationship <ul><li>Full generalization: no high-level entity, inherit all attributes</li><li>Partial generalization: must be high-level entity</li></ul></li><li>Multiple relationship: middle table <ul><li>Type1: not allow partial participation, inherit keys</li><li>Type2: allow partial participation, add a new key</li><li>Multiple binary relationships</li></ul></li></ul></li><li>IDEF1x</li></ul></li><li><p><u>Steps:</u></p><ul><li>Problems</li></ul></li></ul><hr><h4 id="physical-database-design" tabindex="-1"><a class="header-anchor" href="#physical-database-design" aria-hidden="true">#</a> <em>Physical Database Design:</em></h4><ul><li><p><u>Goals:</u> combining DBMS, describe conceptual database with physical patterns</p></li><li><p><u>Submissions:</u> physical database design report</p><ul><li>DBMS type</li><li>index</li><li>view</li><li>security</li></ul></li><li><p><u>Steps:</u></p></li></ul><h3 id="_5-2-database-design-theories" tabindex="-1"><a class="header-anchor" href="#_5-2-database-design-theories" aria-hidden="true">#</a> 5.2 Database Design Theories</h3><blockquote><ul><li>Data dependency theory <ul><li>Functional dependency</li><li>Multi-value dependency</li><li>Join dependency</li></ul></li><li>Relation normal from theory <ul><li>1NF 2NF 3NF BCNF <code>&lt;=&gt;</code> Functional dependency</li><li>4NF <code>&lt;=&gt;</code> Multi-value dependency</li><li>5NF <code>&lt;=&gt;</code> Join dependency</li></ul></li><li>Schema decomposition theory <ul><li>Lossless join</li><li>Preserve dependency</li></ul></li></ul><p>According to <em><strong>Data Dependence</strong></em>, judge the <em><strong>Relation Normal Form</strong></em>, then apply the <em><strong>Schema Decomposition</strong></em> if necessary</p></blockquote><h4 id="functional-dependency-theory" tabindex="-1"><a class="header-anchor" href="#functional-dependency-theory" aria-hidden="true">#</a> <em>Functional Dependency Theory:</em></h4><ul><li><u>Concepts:</u><ul><li>Functional dependency</li><li>Full &amp; Partial functional dependency</li><li>Transitive functional dependency <ul><li>Four conditions</li></ul></li><li>Candidate / Alternative key <ul><li>Primary key</li><li>Prime &amp; Non-prime attribute</li><li>Super key</li></ul></li></ul></li><li><u>Deduction:</u><ul><li>Logical implication &amp; Closure</li><li>Armstrong axiom A1 ~ A3 &amp; Lemma 1 <ul><li>valid &amp; complete</li></ul></li><li>Lemma 2 &amp; Lemma 3</li><li>Attribute (set) closure &amp; Lemma 4 <ul><li>Calculate attribute closure: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>X</mi><mrow><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow></msup></mrow><annotation encoding="application/x-tex">X^{(i)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.888em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">i</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span></span></span></span></li></ul></li></ul></li><li><u>Equivalence:</u><ul><li>Cover &amp; Lemma 5</li><li>Minimal cover &amp; Lemma 6 <ol><li>split right part</li><li>if no <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mo>→</mo><mi>A</mi></mrow><annotation encoding="application/x-tex">X\rarr A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span>, can <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span> still deduces <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span> by other functional dependencies? namely does <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span> include in <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>X</mi><mrow><mi>F</mi><mo>−</mo><mo stretchy="false">{</mo><mi>X</mi><mo>−</mo><mi>A</mi><mo stretchy="false">}</mo></mrow><mo>+</mo></msubsup></mrow><annotation encoding="application/x-tex">X^+_{F-\{X-A\}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3267em;vertical-align:-0.5152em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8115em;"><span style="top:-2.3598em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">F</span><span class="mbin mtight">−</span><span class="mopen mtight">{</span><span class="mord mathnormal mtight" style="margin-right:0.07847em;">X</span><span class="mbin mtight">−</span><span class="mord mathnormal mtight">A</span><span class="mclose mtight">}</span></span></span></span><span style="top:-3.1031em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.5152em;"><span></span></span></span></span></span></span></span></span></span></li><li>if one attr in the left part is deleted, can left attrs deduce the deleted attr</li></ol></li></ul></li></ul><hr><h4 id="relation-normal-form-theory" tabindex="-1"><a class="header-anchor" href="#relation-normal-form-theory" aria-hidden="true">#</a> <em>Relation Normal Form Theory:</em></h4><ul><li><u>1NF:</u><ul><li>Definition:</li><li>Handle:</li></ul></li><li><u>2NF:</u><ul><li>Definition: Based on 1NF, <strong>non-prime</strong> attribute <strong>partial</strong> functional dependency</li><li>Redundancy:</li></ul></li><li><u>3NF:</u><ul><li>Definition: Based on 2NF, <strong>non-prime</strong> attribute <strong>transitive</strong> functional dependency</li><li>Redundancy:</li></ul></li><li><u>BCNF:</u><ul><li>Definition: Based on 1NF, left part of all <strong>non-trivial functional</strong> dependency is <strong>super key</strong></li><li>Relationship with 3NF</li></ul></li><li><u>Multi-value dependency &amp; 4NF:</u><ul><li>Multi-value dependency overview: <ul><li>same X, exchanged Y</li><li>Armstrong axiom A4 ~ A6 <ul><li>Complementation</li><li>Augmentation</li><li>Transitivity</li></ul></li><li>Armstrong axiom A7 ~ A8: <ul><li>functional dependency</li><li>partially deduced</li></ul></li><li>Lemma 7 <ul><li>Union</li><li>Pseudo transitivity</li><li>Mixed pseudo tra</li><li>Decomposition</li></ul></li></ul></li><li>4NF Definition: Based on 1NF, left part of all <strong>non-trivial multi-valued</strong> dependency is <strong>super key</strong><ul><li>Including functional dependency</li></ul></li><li>Relationship with BCNF</li><li>W4NF Definition: one of complementing multi-value dependency is functional dependency</li></ul></li><li><u>Join dependency &amp; 5NF:</u><ul><li>Join dependency: n degree lossless join decomposition</li><li>5NF: every join dependency is joined by candidate key</li></ul></li></ul><hr><h4 id="schema-decomposition-theory" tabindex="-1"><a class="header-anchor" href="#schema-decomposition-theory" aria-hidden="true">#</a> <em>Schema Decomposition Theory:</em></h4><ul><li><u>Basic concepts:</u><ul><li>Schema decomposition</li><li>Data <strong>content equivalence</strong> &amp; Lemma 1</li><li>Data <strong>dependency</strong> equivalence</li></ul></li><li><u>Lossless join decomposition:</u><ul><li>Definition:</li><li>Testing algorithm:</li><li>A simple version:</li><li>Properties:</li></ul></li><li><u>Preserving dependency decomposition:</u><ul><li>Definition:</li><li>Testing algorithm:</li></ul></li><li><u>Schema decomposition strategies:</u><ul><li>Decompose schema into <strong>BCNF</strong> with <strong>lossless join</strong>: throw delete</li><li>Decompose schema into <strong>3NF</strong> with <strong>preserving dependency</strong>: throw split combine</li><li>Decompose schema into <strong>3NF</strong> with both <strong>lossless join</strong> and <strong>preserving dependency</strong>:</li><li>Decompose schema into <strong>4NF</strong> with <strong>lossless join</strong>: throw delete</li></ul></li></ul><blockquote><p>Split the difference between redundancy and speed</p></blockquote><h2 id="_6-physical-storage-index" tabindex="-1"><a class="header-anchor" href="#_6-physical-storage-index" aria-hidden="true">#</a> 6 Physical Storage &amp; Index</h2><h3 id="_6-1-storage-architecture" tabindex="-1"><a class="header-anchor" href="#_6-1-storage-architecture" aria-hidden="true">#</a> 6.1 Storage Architecture</h3><div class="hint-container info"><p class="hint-container-title">Storage architecture</p><ul><li><a href="#Overview">Overview</a></li><li>[Data Storage &amp; Query Implementation Framework](#Data Storage &amp; Query Implementation Framework)</li><li>[Map From Tables to Blocks](#Map From Tables to Blocks)</li><li>[File Organization](#File Organization)</li></ul></div><hr><h4 id="overview-3" tabindex="-1"><a class="header-anchor" href="#overview-3" aria-hidden="true">#</a> <em>Overview:</em></h4><ul><li>Concept:</li><li>Problems to be solved: <ul><li>Storage</li><li>Retrieve</li></ul></li></ul><hr><h4 id="data-storage-query-implementation-framework" tabindex="-1"><a class="header-anchor" href="#data-storage-query-implementation-framework" aria-hidden="true">#</a> <em>Data Storage &amp; Query Implementation Framework:</em></h4><blockquote><p>For levels, from bottom to top</p></blockquote><ul><li><p><u><strong>Storage</strong> manager:</u></p><ul><li>Management object: <strong>database</strong><ul><li>disk</li></ul></li><li>Management task: disk r/w</li></ul></li><li><p><u><strong>Buffer</strong> manager:</u></p><ul><li>Management object: database <strong>buffer</strong><ul><li>memory page</li></ul></li><li>Management task: memory allocation</li><li>Relationship with the lower level: exchange memory page with disk block</li></ul></li><li><p><u>Index, <strong>file</strong> and record manager:</u></p><ul><li><p>Management object: DB logic data</p><ul><li><p>Data (table : record : field)</p></li><li><p>Data format (scheme)</p></li><li><p>Data control information</p></li></ul></li><li><p>Management task: map form logic table to physical memory</p></li><li><p>Relationship with the lower level: page command</p></li></ul></li><li><p><u>SQL <strong>complier</strong> and execution <strong>engine</strong>:</u></p><ul><li>Management object: SQL command <ul><li>DML</li><li>DDL</li><li>DCL</li></ul></li><li>Management task: <ul><li>DML compile commands into <strong>basic relation operation implementation algorithms</strong>, and DML engine executes them</li><li>DDL ...</li><li>DCL ...</li></ul></li><li>Relationship with the lower level: <ul><li><strong>DML</strong> require index, file and record, corresponding to <strong>table : record : field</strong></li><li><strong>DDL</strong> correspond to <strong>scheme</strong></li><li><strong>DCL</strong> correspond to <strong>data control information</strong></li></ul></li></ul></li></ul><hr><h4 id="map-from-tables-to-blocks" tabindex="-1"><a class="header-anchor" href="#map-from-tables-to-blocks" aria-hidden="true">#</a> <em>Map From Tables to Blocks:</em></h4><ul><li><p><u>Concept mapping:</u></p></li><li><p><u>Record mapping:</u></p><ul><li>Fixed-length or not</li><li>Cross block or not</li></ul></li><li><p><u>Table mapping:</u></p><ul><li>Continuous or linked or clustered or indexed</li></ul></li></ul><hr><h4 id="file-organization" tabindex="-1"><a class="header-anchor" href="#file-organization" aria-hidden="true">#</a> <em>File Organization:</em></h4><ul><li><u>Concepts:</u><ul><li>File organization:</li><li>Access method:</li></ul></li><li><u>Heap file:</u><ul><li>Features:</li><li>Update: <ul><li>tail</li><li>delete tag</li></ul></li><li>Reorganization:</li></ul></li><li><u>Sequential file:</u><ul><li>Features: ordering field ordering key</li><li>Update: <ul><li>move</li><li>overflow</li></ul></li><li>Reorganization:</li></ul></li><li><u>Hash file:</u><ul><li>Features: hash field hash key</li><li>Query:</li><li>Update: overflow</li><li>Reorganization:</li></ul></li><li><u>Cluster file:</u><ul><li>Cluster:</li><li>Multi-table cluster:</li></ul></li></ul><h3 id="_6-2-index-overview" tabindex="-1"><a class="header-anchor" href="#_6-2-index-overview" aria-hidden="true">#</a> 6.2 Index Overview</h3><h4 id="concept-features" tabindex="-1"><a class="header-anchor" href="#concept-features" aria-hidden="true">#</a> <em>Concept &amp; Features:</em></h4><ul><li><p><u>Concept:</u></p><ul><li><p>Index file: Secondary storage structure, not changing the structure of prime file</p><blockquote><p>Prime file: table, whose physical structure is usually defined by the prime index</p></blockquote></li><li><p>Index key</p><blockquote><ul><li>Order key:</li><li>Search key:</li></ul></blockquote></li></ul></li><li><p><u>Constitution:</u></p><ul><li><p>Entry: Index-field pointer</p></li><li><p>Organization:</p><ul><li>Ordered indices</li><li>Hash indices</li></ul><blockquote><p>The correspondence is that <strong>the prime file</strong> also has its organization like heap file, sequential file, hash file, ...</p></blockquote></li></ul></li><li><p><u>Features:</u></p><ul><li>Much little</li><li>Synchronized with table when updating</li><li>Performance <ul><li>Access time</li><li>Insert time</li><li>Delete time</li><li>Space load</li><li>Type</li><li>Validity</li></ul></li></ul></li></ul><h4 id="index-in-sql" tabindex="-1"><a class="header-anchor" href="#index-in-sql" aria-hidden="true">#</a> <em>Index in SQL:</em></h4><ul><li><p><u>Create:</u></p><ul><li><p>Auto-create: DBMS prime index in prime key</p></li><li><p>SQL create:</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">Create</span> <span class="token punctuation">[</span><span class="token keyword">Unique</span><span class="token punctuation">]</span> <span class="token keyword">Index</span> indexName
	<span class="token keyword">On</span> tableName<span class="token punctuation">(</span>colName <span class="token punctuation">[</span><span class="token keyword">Asc</span><span class="token operator">|</span><span class="token keyword">Desc</span><span class="token punctuation">]</span>
                <span class="token punctuation">[</span><span class="token punctuation">,</span> colName <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>unique</code></li></ul></li></ul></li><li><p><u>Maintain &amp; Update:</u></p><ul><li>Auto-maintain: DBMS do when updating table</li></ul></li><li><p><u>Drop:</u></p><ul><li><p>Auto-drop: DBMS do when deleting table</p></li><li><p>SQL drop:</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">Drop</span> <span class="token keyword">Index</span> indexName
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul></li></ul><h3 id="_6-3-ordered-index" tabindex="-1"><a class="header-anchor" href="#_6-3-ordered-index" aria-hidden="true">#</a> 6.3 Ordered Index</h3><h4 id="dense-sparse-index" tabindex="-1"><a class="header-anchor" href="#dense-sparse-index" aria-hidden="true">#</a> <em>Dense &amp; Sparse Index:</em></h4><ul><li><u>Concepts:</u><ul><li>Sparse: Indices correspond to partial records</li><li>Dense: Indices correspond to all records</li></ul></li><li><u>Storage &amp; Retrieve:</u><ul><li>Sparse: must sorted <ul><li>Prime index: point to each block</li></ul></li><li>Dense: <ul><li>On candidate key: one-to-one</li><li>On non-candidate key <ul><li>Non-duplicate index field <ul><li>Sort</li><li>Pointer buckets: point to a bucket, and the bucket point to some records</li></ul></li><li>Duplicate index field: one-to-one</li></ul></li></ul></li></ul></li><li><u>Evaluation:</u><ul><li>Sparse: little and light, but slow</li><li>Dense:</li></ul></li></ul><hr><h4 id="prime-secondary-index" tabindex="-1"><a class="header-anchor" href="#prime-secondary-index" aria-hidden="true">#</a> <em>Prime &amp; Secondary Index:</em></h4><ul><li><u>Concepts:</u><ul><li>Prime</li><li>Secondary</li></ul></li><li><u>Storage &amp; Retrieve:</u><ul><li>Prime: sorted <strong>primary</strong> key</li><li>Secondary: <strong>unsorted</strong> non-prime attribute <ul><li>Pointer bucket</li></ul></li></ul></li><li><u>Evaluation:</u><ul><li>Prime: <ul><li>Only one, primary or sorted key</li><li>Sparse</li><li>Reorganize</li></ul></li><li>Secondary: <ul><li>Multiple, other keys</li><li>Dense</li></ul></li></ul></li></ul><hr><h4 id="clustered-non-clustered-index" tabindex="-1"><a class="header-anchor" href="#clustered-non-clustered-index" aria-hidden="true">#</a> <em>Clustered &amp; Non-clustered Index:</em></h4><ul><li><u>Concepts:</u><ul><li>Clustered</li><li>Non-clustered</li></ul></li><li><u>Storage &amp; Retrieve:</u><ul><li>Clustered: <ul><li>Sort</li></ul></li><li>Non-clustered</li></ul></li><li><u>Evaluation:</u><ul><li>Clustered: <ul><li>Prime</li></ul></li><li>Non-clustered: <ul><li>Secondary</li></ul></li></ul></li></ul><hr><h4 id="other-patterns" tabindex="-1"><a class="header-anchor" href="#other-patterns" aria-hidden="true">#</a> <em>Other Patterns:</em></h4><ul><li><u>Multi-level Index:</u><ul><li>B &amp; B+ Tree</li></ul></li><li>Invert Index:</li><li>Multi-value index:</li><li>Grid index:</li></ul><h3 id="_6-4-b-tree" tabindex="-1"><a class="header-anchor" href="#_6-4-b-tree" aria-hidden="true">#</a> 6.4 B+ Tree</h3><h4 id="concept-rules" tabindex="-1"><a class="header-anchor" href="#concept-rules" aria-hidden="true">#</a> <em>Concept &amp; Rules:</em></h4><ul><li><p><u>Concept:</u></p></li><li><p><u>Node:</u></p><ul><li><p>Storage appoint:</p><ul><li><p><code>&lt;Ki, Pi&gt;</code> and <code>Pn</code></p><blockquote><p>Notice that <code>Ki</code> is a real value in prime file records</p></blockquote></li><li><p>Range</p></li></ul></li><li><p>Types:</p><ul><li>Root:</li><li>Non-leaf:</li><li>Leaf: point to record or block(prime index)</li></ul></li></ul></li><li><p><u>Balance:</u></p><ul><li>Algorithm</li></ul></li></ul><hr><h4 id="types-of-index-on-b-tree" tabindex="-1"><a class="header-anchor" href="#types-of-index-on-b-tree" aria-hidden="true">#</a> <em>Types of Index on B+ Tree:</em></h4><ul><li><u>On <strong>prime</strong> key:</u><ul><li>Dense index:</li><li>Prime index:</li></ul></li><li><u>On <strong>non-candidate</strong> key (Dense):</u><ul><li>Non-duplicate index field: sort</li><li>Duplicate index field: unsort</li></ul></li></ul><hr><h4 id="b-tree" tabindex="-1"><a class="header-anchor" href="#b-tree" aria-hidden="true">#</a> <em>B Tree:</em></h4><blockquote><p>Differences between B tree and B+ tree about nodes</p></blockquote><ul><li><u>Index filed:</u> only once in B tree</li><li><u>Pointer:</u> both leaf and non-leaf nodes have pointers to prime file</li></ul><hr><h4 id="insert-division" tabindex="-1"><a class="header-anchor" href="#insert-division" aria-hidden="true">#</a> <em>Insert &amp; Division:</em></h4><ul><li><u>Steps:</u><ol><li>...</li><li>...</li></ol></li><li><u>Key points:</u><ul><li>When to devide: <ul><li>Index field</li><li>Pointer</li></ul></li><li>How to adjust pointers <ul><li>After dividing for more fields</li><li>After dividing for more pointers</li></ul></li><li>Effect to B+ tree: <ul><li>Balance</li><li>Pointer utilization</li></ul></li></ul></li></ul><h4 id="delete-combination" tabindex="-1"><a class="header-anchor" href="#delete-combination" aria-hidden="true">#</a> <em>Delete &amp; Combination:</em></h4><ul><li><u>Steps:</u><ol><li>...</li><li>...</li></ol></li><li><u>Key points:</u><ul><li>When to borrow: pointer utilization</li><li>When to combine: can not borrow anymore</li><li>How to adjust pointers:</li><li>Effect to B+ tree: <ul><li>Balance</li><li>Pointer utilization</li></ul></li></ul></li></ul><h3 id="_6-5-hash-index" tabindex="-1"><a class="header-anchor" href="#_6-5-hash-index" aria-hidden="true">#</a> 6.5 Hash Index</h3><h4 id="simple-hash-index" tabindex="-1"><a class="header-anchor" href="#simple-hash-index" aria-hidden="true">#</a> <em>Simple Hash Index:</em></h4><ul><li><u>Concept:</u></li><li><u>Entry:</u> to be hashed into <strong>index blocks</strong></li><li><u>Operations:</u><ul><li>Insert:</li><li>Delete:</li></ul></li><li><u>Problems:</u><ul><li>Static: overflow</li><li>Dynamic: balance</li></ul></li></ul><hr><h4 id="extensible-hash-index" tabindex="-1"><a class="header-anchor" href="#extensible-hash-index" aria-hidden="true">#</a> <em>Extensible Hash Index:</em></h4><ul><li><p><u>Thoughts:</u></p><ul><li><p>Indirect layer: point to index blocks. hashed entries pass this level before entering index blocks</p><blockquote><p>The bucket is just like a hash function</p></blockquote></li><li><p>Size of bucket / hash function: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>i</mi></msup></mrow><annotation encoding="application/x-tex">2^i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8247em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8247em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span></span></span></span></span></span></span>, from high to low. The used digits’ amount in a index block is labeled on the block</p></li></ul></li><li><p><u>Insert and extend:</u> i++, rehash,</p><ol><li>insert to full</li><li>the full index block divides, whose pointer also divides, but the other pointers divides into two pointers pointing to the same block</li></ol></li><li><p><u>Problems:</u></p><ul><li>Pointer amount and utilization: exponential</li></ul></li></ul><hr><h4 id="linear-hash-index" tabindex="-1"><a class="header-anchor" href="#linear-hash-index" aria-hidden="true">#</a> <em>Linear Hash Index:</em></h4><ul><li><u>Thoughts:</u><ul><li>Size of bucket / hash function: below a proportion. from low to high <ul><li>Proportion is usually <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mo>&lt;</mo><mo>=</mo><mi>x</mi><mi>n</mi><mo separator="true">,</mo><mtext> </mtext><mi>x</mi><mo>&gt;</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">r &lt;= xn, ~ x &gt; 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">x</span><span class="mord mathnormal">n</span><span class="mpunct">,</span><span class="mspace nobreak"> </span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></li></ul></li></ul></li><li><u>Insert and increase:</u><ol><li>insert missing and overflow</li><li>the bucket equal to new bucket number in <strong>lower digits</strong> divides</li></ol></li></ul><h2 id="_7-query-algorithm" tabindex="-1"><a class="header-anchor" href="#_7-query-algorithm" aria-hidden="true">#</a> 7 Query Algorithm</h2><h3 id="_7-1-query-implementation-overview" tabindex="-1"><a class="header-anchor" href="#_7-1-query-implementation-overview" aria-hidden="true">#</a> 7.1 Query Implementation Overview</h3><h4 id="logical-and-physical-implementation" tabindex="-1"><a class="header-anchor" href="#logical-and-physical-implementation" aria-hidden="true">#</a> <em>Logical and Physical Implementation:</em></h4><ul><li><p><u>Basic thoughts of DB query implementation:</u></p></li><li><p><u>Steps of query implementation:</u></p></li><li><p><u>Thoughts about implementation:</u></p><ul><li>Thoughts about logical implementation:</li><li>Thoughts about physical implementation: <ul><li><p>Related parameters:</p><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>B</mi><mi>R</mi></msub></mrow><annotation encoding="application/x-tex">B_R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0502em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li><li>...</li></ul></li><li><p>Goals</p><ul><li>Decrease <strong>I/O</strong> times by <strong>memory</strong> utilization</li><li>Decrease memory retrieve complexity by constructing <strong>data structure</strong></li></ul></li></ul></li></ul><blockquote><p>Take <code>join</code> for example:</p><ul><li>Full memory:</li><li>Partial memory:</li></ul></blockquote></li></ul><hr><h4 id="three-types-of-operation-two-strategies-of-implementation" tabindex="-1"><a class="header-anchor" href="#three-types-of-operation-two-strategies-of-implementation" aria-hidden="true">#</a> <em>Three Types of Operation &amp; Two Strategies of Implementation:</em></h4><ul><li><p><u>Three <strong>types</strong> of operation in DB:</u></p><ul><li><strong>Unary</strong> operation of <strong>single tuple</strong><ul><li>Selection</li><li>Projection</li></ul></li><li><strong>Unary</strong> operation of the <strong>whole relation</strong><ul><li>Distinct</li><li>Group</li><li>Sorting</li></ul></li><li><strong>Binary</strong> operation of the <strong>whole relation</strong><ul><li>Union, difference, intersection</li><li>Product, join</li></ul></li></ul></li><li><p><u>Two <strong>calculating strategies</strong> of query implementation:</u></p><ul><li><p>Pipeline: Scan DB one time per <strong>groups</strong> of relation operation, the <strong>intermediate result</strong> can’t be stored completely</p><blockquote><p>take <strong>iterator</strong> for example</p></blockquote></li><li><p>Materialization: Scan DB one (or more) time per <strong>single</strong> relation operation, the <strong>intermediate result</strong> can be stored <strong>completely</strong></p><ul><li><p>One-pass scanning: Scan the whole relation <strong>one time</strong>, need to read the whole relation into memory in the worst case</p><ul><li><p>Table space / Index scanning</p><blockquote><p>showed above in <code>join</code> example</p></blockquote></li><li><p>Based on sort</p></li><li><p>Based on hash</p></li><li><p>Based on index</p></li></ul></li><li><p>Two-pass scanning: Scan the whole relation <strong>two times</strong>, just need to read a <strong>group</strong> of the whole relation into memory</p><ul><li>Based on sort</li><li>Based on hash</li><li>Based on index</li></ul></li></ul></li></ul></li></ul><h3 id="_7-2-iterator-algorithm" tabindex="-1"><a class="header-anchor" href="#_7-2-iterator-algorithm" aria-hidden="true">#</a> 7.2 Iterator Algorithm</h3><ul><li><p><u>Concept:</u></p><ul><li>Key methods in Object-oriented <code>Iterator</code>: <ul><li><code>Open()</code></li><li><code>GetNext()</code></li><li><code>Close()</code></li></ul></li></ul></li><li><p><u>Construction:</u></p><ul><li><p>Iterator of <strong>a relation</strong> / Table space scanning:</p><div class="language-pseudocode line-numbers-mode" data-ext="pseudocode"><pre class="language-pseudocode"><code></code></pre><div class="line-numbers" aria-hidden="true"></div></div></li><li><p>Iterator of <strong>unary tuple operation</strong></p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token comment">// Selection</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token comment">// Projection(Selection(R))</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>Iterator of <strong>binary relation operation</strong>:</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token comment">// Union</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token comment">// Join</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul></li></ul><h3 id="_7-3-one-pass-scanning-algorithm" tabindex="-1"><a class="header-anchor" href="#_7-3-one-pass-scanning-algorithm" aria-hidden="true">#</a> 7.3 One-pass Scanning Algorithm</h3><h4 id="read-a-relation-in-disk" tabindex="-1"><a class="header-anchor" href="#read-a-relation-in-disk" aria-hidden="true">#</a> <em>Read a Relation in Disk:</em></h4><ul><li><u>Cluster relation:</u><ul><li>Read into memory <ul><li>Table space scanning</li><li>Index scanning</li></ul></li><li>Sort when reading into memory <ul><li>Table space scanning (TPMMS)</li><li>Index scanning</li></ul></li></ul></li><li><u>Non-cluster relation:</u><ul><li>Read into memory</li><li>Sort when reading into memory (TPMMS)</li></ul></li></ul><hr><h4 id="one-pass-scanning-based-on-sort-hash" tabindex="-1"><a class="header-anchor" href="#one-pass-scanning-based-on-sort-hash" aria-hidden="true">#</a> <em>One-pass Scanning Based on Sort &amp; Hash:</em></h4><ul><li><p><u>Basic thoughts:</u> <strong>data structure in memory</strong></p></li><li><p><u><strong>Unary</strong> operation of the <strong>whole relation</strong>:</u></p><ul><li>Distinct</li><li>Group</li><li>Complexity:</li></ul></li><li><p><u><strong>Binary</strong> operation of the <strong>whole relation</strong>:</u></p><ul><li><p>Set operation:</p></li><li><p>Join: Speed up memory operation</p></li><li><p>Complexity:</p></li></ul></li></ul><hr><h4 id="one-pass-scanning-based-on-index" tabindex="-1"><a class="header-anchor" href="#one-pass-scanning-based-on-index" aria-hidden="true">#</a> <em>One-pass Scanning Based on Index:</em></h4><ul><li><u>Basic thoughts:</u> only read index block when comparing</li><li><u><strong>Unary</strong> operation of <strong>single tuple</strong> / <strong>Selection</strong> based on index:</u><ul><li>Cluster:</li><li>Non-cluster</li><li>Cost</li></ul></li><li><u><strong>Binary</strong> operation of the <strong>whole relation</strong> / <strong>Join</strong> based on index / <strong>Zigzag</strong>:</u><ul><li>Steps: <ol><li>...</li></ol></li></ul></li></ul><h3 id="_7-4-two-pass-scanning-algorithm" tabindex="-1"><a class="header-anchor" href="#_7-4-two-pass-scanning-algorithm" aria-hidden="true">#</a> 7.4 Two-pass Scanning Algorithm</h3><h4 id="two-pass-scanning-algorithms-based-on-sort" tabindex="-1"><a class="header-anchor" href="#two-pass-scanning-algorithms-based-on-sort" aria-hidden="true">#</a> <em>Two-pass Scanning Algorithms Based on Sort:</em></h4><ul><li><p><u>Basic thoughts:</u></p><p>Divide-and-conquer: Union of subset operation</p><ol><li><p>The first pass / Divide: make <strong>subset itself</strong> having some <strong>feature</strong></p><blockquote><p>Feature: like sort, hash, ...</p></blockquote></li><li><p>The second pass / Conquer: use <strong>feature</strong> to operate <strong>between subsets</strong> in memory</p></li></ol></li><li><p><u>TPMMS(Two-Phase Multiway Merge-Sort):</u></p><ul><li><p>Divide:</p><ul><li>Math relationship: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><msub><mi>B</mi><mrow><mi>p</mi><mi>r</mi><mi>o</mi><mi>b</mi><mi>l</mi><mi>e</mi><mi>m</mi></mrow></msub><mi>N</mi></mfrac><mo>&lt;</mo><msub><mi>B</mi><mrow><mi>m</mi><mi>e</mi><mi>m</mi><mi>o</mi><mi>r</mi><mi>y</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\frac{B_{problem}}N&lt;B_{memory}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3364em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9914em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.5131em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:-0.0502em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">ro</span><span class="mord mathnormal mtight">b</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2901em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0502em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">ory</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></li><li>Concrete operation: <ol><li>Input</li><li>Process: sort subset in memory</li><li>Output</li></ol></li></ul></li><li><p>Conquer:</p><ul><li><p>Math relationship: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>&lt;</mo><msub><mi>B</mi><mrow><mi>m</mi><mi>e</mi><mi>m</mi><mi>o</mi><mi>r</mi><mi>y</mi></mrow></msub></mrow><annotation encoding="application/x-tex">N&lt;B_{memory}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7224em;vertical-align:-0.0391em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0502em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">ory</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></p><blockquote><p>Combine formula above we get <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>B</mi><mrow><mi>p</mi><mi>r</mi><mi>o</mi><mi>b</mi><mi>l</mi><mi>e</mi><mi>m</mi></mrow></msub><mo>&lt;</mo><msubsup><mi>B</mi><mrow><mi>m</mi><mi>e</mi><mi>m</mi><mi>o</mi><mi>r</mi><mi>y</mi></mrow><mn>2</mn></msubsup></mrow><annotation encoding="application/x-tex">B_{problem}&lt;B_{memory}^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0502em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">ro</span><span class="mord mathnormal mtight">b</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1972em;vertical-align:-0.3831em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-2.453em;margin-left:-0.0502em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">ory</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em;"><span></span></span></span></span></span></span></span></span></span></p><p>If larger: multi-pass</p><ol><li>Divide and sort subset firstly (anyway, we can choose <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span> satisfy the first formula)</li><li>Conquer partial subsets with <strong>group amount</strong> satisfying the second formula until ...</li><li>When the whole relation with <strong>group amount</strong> satisfying the second formula, ...</li></ol></blockquote></li><li><p>Concrete operation:</p><ol><li>Input</li><li>Process</li><li>Output</li></ol></li></ul></li><li><p>Complexity</p><ul><li>Divide: input output</li><li>Conquer: input (output)</li></ul></li></ul></li><li><p><u><strong>Unary</strong> operation of the <strong>whole relation</strong>:</u></p><ul><li><p>Divide: the same as TPMMS</p></li><li><p>Conquer:</p><ul><li>Distinct</li><li>Group: sum, max, min, mean, ...</li></ul></li><li><p>Complexity:</p></li></ul></li><li><p><u><strong>Binary</strong> operation of the <strong>whole relation</strong>:</u></p><ul><li><p>Divide: the same as TPMMS, notice the sorted field of two relations</p></li><li><p>Conquer:</p><ul><li>Set operations:</li><li>Join:</li></ul></li><li><p>Complexity: no explanation in MOOC</p></li></ul></li></ul><hr><h4 id="two-pass-scanning-algorithms-based-on-hash" tabindex="-1"><a class="header-anchor" href="#two-pass-scanning-algorithms-based-on-hash" aria-hidden="true">#</a> <em>Two-pass Scanning Algorithms Based on Hash:</em></h4><ul><li><p>Basic thoughts:</p><p>Hash and rehash:</p><ol><li><p>The first pass: hash into <strong>sub-lists</strong></p></li><li><p>The second pass: rehash each sub-list with <strong>another hash function</strong> into <strong>sub-sub-lists</strong> in memory</p><blockquote><p>Thus the same value must fall into the same sub-sub-list</p><p>The two hash functions together should divide the records into very careful blocks</p></blockquote></li></ol></li><li><p><u><strong>Unary</strong> operation of the <strong>whole relation</strong>:</u></p><ul><li><p>Hash: the same as basic thoughts</p></li><li><p>Rehash:</p><ul><li>Distinct</li><li>Group</li></ul></li><li><p>Complexity</p></li></ul></li><li><p><u><strong>Binary</strong> operation of the <strong>whole relation</strong>:</u></p><ul><li><p>Hash: notice the hash field and the same hash function</p></li><li><p>Rehash:</p><ul><li>Set operations: process <strong>two sub-lists with the same hash result from two relations</strong> in memory, find the same field, and then switch to <strong>another two sub-lists from two relations</strong></li><li>Join: just like set operations</li></ul></li><li><p>Complexity: no explanation in MOOC</p></li></ul></li></ul><h3 id="_7-5-query-optimization" tabindex="-1"><a class="header-anchor" href="#_7-5-query-optimization" aria-hidden="true">#</a> 7.5 Query Optimization</h3><h4 id="query-optimization-overview" tabindex="-1"><a class="header-anchor" href="#query-optimization-overview" aria-hidden="true">#</a> <em>Query Optimization Overview:</em></h4><ul><li><p><u>Necessity:</u></p><ul><li>Efficiency of product operation</li><li>DBMS core technology: development of relation DB</li></ul></li><li><p><u><strong>Semantic</strong> optimization and <strong>content</strong> equivalence:</u></p><ul><li>When to optimize: before compiling</li><li>What to optimize: rewrite to equivalent but more efficient <strong>SQL</strong><ul><li>Tables and attributes</li></ul></li><li>Who do optimize: <ul><li>Programmer</li><li>DBMS auto: keep semantic equality and integrity rules</li></ul></li></ul></li><li><p><u><strong>Syntactic</strong> optimization and <strong>syntax</strong> equivalence:</u></p><ul><li><p>When to optimize: after compiling</p></li><li><p>What to optimize:</p><p>Change sequence of <strong>relation algebra operations</strong> in <strong>logic</strong> level, form logic query plan</p><ul><li>Do <strong>selection and projection</strong> earlier</li></ul></li><li><p>Who do optimize: DBMS auto</p></li></ul></li><li><p><u><strong>Executing</strong> optimization:</u></p><ul><li><p>When to optimize: when <strong>executing</strong> programs</p></li><li><p>What to optimize:</p><p>Choose <strong>routines</strong> for relation algebra operations, form <strong>query plan for engine</strong> to execute</p><ul><li>Estimate cost</li></ul></li><li><p>Who do optimize: DBMS auto</p></li></ul></li><li><p><u>Optimization in query implementation steps:</u></p></li></ul><hr><h4 id="query-optimization-in-logical-level" tabindex="-1"><a class="header-anchor" href="#query-optimization-in-logical-level" aria-hidden="true">#</a> <em>Query Optimization in Logical Level:</em></h4><ul><li><p><u>Train of thoughts:</u></p><ul><li>Syntactic tree: from bottom(tables) to top</li><li>Two key points: <ul><li>Prove equivalence (theorems)</li><li>Adjust sequence (algorithm)</li></ul></li><li>Strategies: <ul><li>Projection and selection: <ul><li>Do <strong>projection</strong> and <strong>selection</strong> <strong>earlier</strong>: make <strong>intermediate results</strong> small</li><li>Concatenate <strong>projection</strong> and <strong>selection</strong>: <strong>pipeline</strong></li><li>Associate <strong>projection</strong> with <strong>binary</strong> operation</li><li>Associate <strong>selection</strong> with <strong>product</strong> before into a join</li></ul></li><li>Preprocess: <ul><li>Index</li><li>Common subexpression</li></ul></li></ul></li></ul></li><li><p><u>Equivalence of relation algebra basic operations exchanging:</u></p><ul><li><p>Definition:</p></li><li><p>Theorems:</p><ul><li>L1: Commutative law between <strong>joins</strong> and between <strong>products</strong></li><li>L2: Associative law between <strong>joins</strong> and between <strong>products</strong></li><li>L3: Concatenation law between <strong>projections</strong><ul><li>Two-way usage</li></ul></li><li>L4: Concatenation law between <strong>selections</strong><ul><li>Two-way usage</li></ul></li><li>L5: Commutative law between <strong>selection and projection</strong></li><li>L6: Commutative law between <strong>selection and product</strong></li><li>L7: Commutative law between <strong>projection and product</strong></li><li>L8: Commutative law between <strong>selection and union</strong></li><li>L9: Commutative law between <strong>selection and difference</strong></li><li>L10: Commutative law between <strong>projection and union</strong></li></ul><blockquote><ul><li>L1 ~ L2: binary operations</li><li>L3 ~ L5: unary operations</li><li>L6 ~ L10: between unary operation and binary operation</li></ul></blockquote></li></ul></li><li><p><u>Algorithm:</u></p><ol start="0"><li><p>Products and joins commutation for associating with selections</p></li><li><p>Selection concatenation and <strong>commutation</strong></p></li><li><p>Projection concatenation and <strong>commutation</strong></p></li><li><p><strong>Concatenate</strong> selections and <strong>concatenate</strong> projections (selection before projection)</p></li><li><p>Group nodes and associate product and selection into <strong>join</strong></p><blockquote><p>I don’t understand what means not to group when <strong>equal join</strong> can’t be formed with product node and descendant node</p></blockquote></li><li><p>Generate program where descendant groups execute first</p></li></ol></li></ul><hr><h4 id="query-optimization-in-physical-level" tabindex="-1"><a class="header-anchor" href="#query-optimization-in-physical-level" aria-hidden="true">#</a> <em>Query Optimization in Physical Level:</em></h4><ul><li><p><u>Train of thoughts:</u></p><ul><li>Steps: <ol><li>DB info</li><li>Choose routines and estimate cost</li><li>Form query plan</li></ol></li><li>Physical query operators / Routines: <ul><li>Get relation from blocks</li><li>Implementation algorithm of relation operation</li></ul></li><li>Measurements: <ul><li>I/O</li><li>CPU time</li><li>Memory cost (buffer)</li><li>Intermediate results</li><li>Calculation amount</li></ul></li><li>DB statistical info: <ul><li><code>T(R)</code></li><li><code>B(R)</code></li><li><code>I(R)</code></li><li><code>f(R)</code></li><li><code>V(A, R)</code></li><li><code>SC(A, R)</code></li><li><code>b</code></li></ul></li><li>Get info: DBA</li></ul></li><li><p><u>Cost estimate:</u></p><ul><li><p>Goal: <code>E</code> is a relation operation expression. Given relations’ statistical info (like <code>T(R) B(R) V(A, R)</code>) related to <code>E</code>, estimate statistical info of <code>E</code></p></li><li><p>Common estimate:</p><ul><li><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>π</mi><mi>L</mi></msub><mo stretchy="false">(</mo><mi>R</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\pi_L(R)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">L</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mclose">)</span></span></span></span></p><ul><li><code>T = T(R)</code></li><li><code>B</code> needs to be calculated concretely</li></ul></li><li><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>σ</mi><mrow><mi>A</mi><mo>=</mo><mi>c</mi></mrow></msub><mo stretchy="false">(</mo><mi>R</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\sigma_{A=c}(R)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">A</span><span class="mrel mtight">=</span><span class="mord mathnormal mtight">c</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mclose">)</span></span></span></span></p><ul><li><p><code>T</code> range: <code>T(R) - (V(R, A) - 1)</code></p></li><li><p><code>T</code> estimate: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo>=</mo><mfrac><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>R</mi><mo stretchy="false">)</mo></mrow><mrow><mi>V</mi><mo stretchy="false">(</mo><mi>R</mi><mo separator="true">,</mo><mi>A</mi><mo stretchy="false">)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">T=\frac{T(R)}{V(R,A)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.53em;vertical-align:-0.52em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">V</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">A</span><span class="mclose mtight">)</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p><blockquote><p>Let <code>V(R, A) = 10</code> when not knowing <code>V(R, A)</code> ahead</p></blockquote></li></ul></li><li><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>σ</mi><mrow><mi>A</mi><mo>&lt;</mo><mi>c</mi></mrow></msub><mo stretchy="false">(</mo><mi>R</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\sigma_{A&lt;c}(R)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">A</span><span class="mrel mtight">&lt;</span><span class="mord mathnormal mtight">c</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1774em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mclose">)</span></span></span></span></p><ul><li><code>T</code> range:</li><li><code>T</code> estimate: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo>=</mo><mfrac><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>R</mi><mo stretchy="false">)</mo></mrow><mn>3</mn></mfrac></mrow><annotation encoding="application/x-tex">T=\frac{T(R)}3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.355em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></li></ul></li><li><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>σ</mi><mrow><msub><mi>C</mi><mn>1</mn></msub><mtext> </mtext><mi>a</mi><mi>n</mi><mi>d</mi><mtext> </mtext><msub><mi>C</mi><mn>2</mn></msub></mrow></msub><mo stretchy="false">(</mo><mi>R</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\sigma_{C_1~and~C_2}(R)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0001em;vertical-align:-0.2501em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em;"><span style="top:-2.357em;margin-left:-0.0715em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mspace nobreak mtight"><span class="mtight"> </span></span><span class="mord mathnormal mtight">an</span><span class="mord mathnormal mtight">d</span><span class="mspace nobreak mtight"><span class="mtight"> </span></span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em;"><span style="top:-2.357em;margin-left:-0.0715em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2501em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mclose">)</span></span></span></span>: Just multiply</p></li><li><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>σ</mi><mrow><msub><mi>C</mi><mn>1</mn></msub><mtext> </mtext><mi>o</mi><mi>r</mi><mtext> </mtext><msub><mi>C</mi><mn>2</mn></msub></mrow></msub><mo stretchy="false">(</mo><mi>R</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\sigma_{C_1~or~C_2}(R)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0001em;vertical-align:-0.2501em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em;"><span style="top:-2.357em;margin-left:-0.0715em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mspace nobreak mtight"><span class="mtight"> </span></span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">or</span><span class="mspace nobreak mtight"><span class="mtight"> </span></span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em;"><span style="top:-2.357em;margin-left:-0.0715em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2501em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mclose">)</span></span></span></span></p><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo>=</mo><mi>n</mi><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mfrac><msub><mi>m</mi><mn>1</mn></msub><mi>n</mi></mfrac><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mfrac><msub><mi>m</mi><mn>2</mn></msub><mi>n</mi></mfrac><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T=n(1-(1-\frac{m_1}n)(1-\frac{m_2}n))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.095em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7115em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4101em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.095em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7115em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4101em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">))</span></span></span></span></li></ul></li><li><p><code>R(X, Y) Natural Join S(Y, Z)</code></p><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo>=</mo><mfrac><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>R</mi><mo stretchy="false">)</mo><mi>T</mi><mo stretchy="false">(</mo><mi>S</mi><mo stretchy="false">)</mo></mrow><mrow><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy="false">(</mo><mi>V</mi><mo stretchy="false">(</mo><mi>R</mi><mo separator="true">,</mo><mi>Y</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>V</mi><mo stretchy="false">(</mo><mi>S</mi><mo separator="true">,</mo><mi>Y</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">T=\frac{T(R)T(S)}{max(V(R,Y),V(S,Y))}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.53em;vertical-align:-0.52em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ma</span><span class="mord mathnormal mtight">x</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.22222em;">V</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.22222em;">Y</span><span class="mclose mtight">)</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.22222em;">V</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.22222em;">Y</span><span class="mclose mtight">))</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span><span class="mclose mtight">)</span><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><ul><li>Supposed that successful joined records are <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac1{max}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ma</span><span class="mord mathnormal mtight">x</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></li></ul></li></ul></li></ul></li></ul></li></ul><h2 id="_8-transaction-processing" tabindex="-1"><a class="header-anchor" href="#_8-transaction-processing" aria-hidden="true">#</a> 8 Transaction Processing</h2><h3 id="_8-1-concurrency-control" tabindex="-1"><a class="header-anchor" href="#_8-1-concurrency-control" aria-hidden="true">#</a> 8.1 Concurrency Control</h3><h4 id="_8-1-1-conceptual-framework-of-concurrency-control" tabindex="-1"><a class="header-anchor" href="#_8-1-1-conceptual-framework-of-concurrency-control" aria-hidden="true">#</a> <em>8.1.1 Conceptual Framework of Concurrency Control:</em></h4><ul><li><p><u>Inconsistency:</u></p><ul><li>Cause: <ul><li>DB sharing</li><li>Multi-process</li></ul></li><li>Types: <ul><li>Lost update:</li><li>Dirty read</li><li>Unrepeatable read</li><li>Phantom read</li></ul></li><li>Solutions / <strong>Concurrency control methods</strong>: <ul><li>Based on lock</li><li>Based on withdrawal (timestamp and validation)</li></ul></li><li>Goals: consistency and concurrency</li></ul></li><li><p><u>Transaction:</u></p><ul><li><p>Concept:</p><ul><li>From macro / programmer: SQLs</li><li>From micro / DBMS: basic operations <ul><li>Concurrently execute</li></ul></li></ul></li><li><p>Features / ACID:</p><ul><li>Atomicity: either no or all</li><li>Consistency:</li><li>Isolation: between transactions</li><li>Durability</li></ul><blockquote><p>Concurrency control: ACI</p><p>Failure recovery: AD</p></blockquote></li></ul></li><li><p><u>DBMS concurrency control:</u></p><ul><li>What to do: micro executing sequence =&gt; macro ACI</li><li>How to do: <ul><li>Manager: Generate transactions (including their timestamp) and manage their operations</li><li>Scheduler: Generate r/w operation sequence and keep consistency</li><li>Logging</li><li>Locks</li></ul></li></ul></li></ul><hr><h4 id="transaction-schedule-serializability" tabindex="-1"><a class="header-anchor" href="#transaction-schedule-serializability" aria-hidden="true">#</a> <em>Transaction Schedule &amp; Serializability:</em></h4><ul><li><p><u>Basic concepts:</u></p><ul><li><p><strong>Transaction schedule</strong>: a group of transaction</p><ul><li><strong>Serial</strong> schedule:</li><li><strong>Concurrent</strong> schedule:</li></ul></li><li><p><strong>Correctness</strong> of concurrent scheduling: result equivalent to some **serial schedule **in form</p><blockquote><p>Two core problems:</p><ul><li>Judge</li><li>Generate</li></ul></blockquote></li><li><p><strong>Serializability</strong> of concurrent scheduling: process, more strict, equivalent to some <strong>serial schedule</strong></p></li></ul></li><li><p><u>Conflict serialization model:</u></p><ul><li>Basic model:</li><li>Conflict: <ul><li>same transaction</li><li>ww</li><li>rw</li></ul></li><li>Conflict serializability: <ul><li>More strict than serializability</li></ul></li><li>Conflict serializability discriminant algorithm</li></ul></li></ul><hr><h4 id="concurrency-control-based-on-lock-protocol" tabindex="-1"><a class="header-anchor" href="#concurrency-control-based-on-lock-protocol" aria-hidden="true">#</a> <em>Concurrency Control Based on Lock &amp; Protocol:</em></h4><ul><li><p><u>Lock:</u></p><ul><li>Concept:</li><li>Effect: <ul><li>Scheduler</li><li>Protocol</li></ul></li></ul></li><li><p><u>Lock protocol concept:</u></p><ul><li>Concept:</li><li>Locking granularity: a data element</li><li>Types: <ul><li>E<strong>x</strong>clusive locks: write lock <code>Xlock</code></li><li><strong>S</strong>hared locks: read lock <code>Slock</code></li><li><strong>U</strong>pdate locks</li><li><strong>I</strong>ncremental locks</li></ul></li><li>Compatibility matrix:</li></ul></li><li><p><u>Isolation levels / Basic lock protocol:</u></p><ul><li>Read uncommitted / 0 level protocol: <ul><li>Description:</li><li>Consistency: prevent lost update, allow dirty read, unrepeatable read and phantom read</li></ul></li><li>Read committed / 1 level protocol:</li><li>Repeatable read/ 2 level protocol:</li><li>Serializable / 3 level protocol:</li></ul><blockquote><p>Protocols are about how to lock and unlock:</p><ul><li>The protocol points to <strong>the same data element</strong> <code>A</code>, explain how to <code>Xlock(A) Xunlock(A)</code>and <code>Slock(A) Sunlock(A)</code></li><li>... ??? I have some puzzle here</li></ul></blockquote></li><li><p><u>Two-Phase Locking protocol (2PL):</u></p><ul><li>Definition:</li><li>Conflict serializability:</li><li>Deadlock:</li></ul></li></ul><hr><h4 id="concurrency-control-based-on-withdrawal" tabindex="-1"><a class="header-anchor" href="#concurrency-control-based-on-withdrawal" aria-hidden="true">#</a> <em>Concurrency Control Based on Withdrawal:</em></h4><ul><li><p><u>Transaction timestamp:</u></p><ul><li>Concept:</li><li>Function:</li></ul></li><li><p><u>Timestamp basic rule:</u> Transaction executing earlier should R/W earlier</p><ul><li><p>Rules: RT WT TS</p><ul><li>...</li></ul><blockquote><p>If the transaction related to an RT or WT has been rollbacked, the RT or WT should be reset to 0</p></blockquote></li><li><p>Problems to be solved:</p><ul><li>Thomas write</li><li>Dirty read</li></ul></li></ul></li><li><p><u>Thomas rule and its improvement:</u></p><ul><li>Thomas write:</li><li>Improvement rules: RT WT C TS postpone <ul><li>r: <ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mi>S</mi><mo>≥</mo><mi>W</mi><mi>T</mi></mrow><annotation encoding="application/x-tex">TS\ge WT</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">TS</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span>: <ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mo>=</mo><mi>t</mi><mi>r</mi><mi>u</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">C=true</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">u</span><span class="mord mathnormal">e</span></span></span></span>: allow</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mo>=</mo><mi>f</mi><mi>a</mi><mi>l</mi><mi>s</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">C=false</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">se</span></span></span></span>: postpone until <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mo>=</mo><mi>t</mi><mi>r</mi><mi>u</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">C=true</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">u</span><span class="mord mathnormal">e</span></span></span></span></li></ul></li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mi>S</mi><mo>&lt;</mo><mi>W</mi><mi>T</mi></mrow><annotation encoding="application/x-tex">TS\lt WT</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7224em;vertical-align:-0.0391em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">TS</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span>: rollback</li></ul></li><li>w <ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mi>S</mi><mo>≥</mo><mi>R</mi><mi>T</mi><mtext> </mtext><mi>a</mi><mi>n</mi><mi>d</mi><mtext> </mtext><mi>T</mi><mi>S</mi><mo>≥</mo><mi>W</mi><mi>T</mi></mrow><annotation encoding="application/x-tex">TS\ge RT~and~TS\ge WT</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">TS</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8304em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span><span class="mspace nobreak"> </span><span class="mord mathnormal">an</span><span class="mord mathnormal">d</span><span class="mspace nobreak"> </span><span class="mord mathnormal" style="margin-right:0.05764em;">TS</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span>: allow, let <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mo>=</mo><mi>f</mi><mi>a</mi><mi>l</mi><mi>s</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">C=false</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">se</span></span></span></span></li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mi>S</mi><mo>≥</mo><mi>R</mi><mi>T</mi><mtext> </mtext><mi>a</mi><mi>n</mi><mi>d</mi><mtext> </mtext><mi>T</mi><mi>S</mi><mo>&lt;</mo><mi>W</mi><mi>T</mi></mrow><annotation encoding="application/x-tex">TS\ge RT~and~TS\lt WT</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">TS</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.0391em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span><span class="mspace nobreak"> </span><span class="mord mathnormal">an</span><span class="mord mathnormal">d</span><span class="mspace nobreak"> </span><span class="mord mathnormal" style="margin-right:0.05764em;">TS</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span>: <ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mo>=</mo><mi>t</mi><mi>r</mi><mi>u</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">C=true</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">u</span><span class="mord mathnormal">e</span></span></span></span>: ignore (Thomas write)</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mo>=</mo><mi>f</mi><mi>a</mi><mi>l</mi><mi>s</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">C=false</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">se</span></span></span></span>: postpone until <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mo>=</mo><mi>t</mi><mi>r</mi><mi>u</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">C=true</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">u</span><span class="mord mathnormal">e</span></span></span></span></li></ul></li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mi>S</mi><mo>&lt;</mo><mi>R</mi><mi>T</mi></mrow><annotation encoding="application/x-tex">TS\lt RT</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7224em;vertical-align:-0.0391em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">TS</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span></span></span></span>: rollback</li></ul></li></ul></li><li>Problems: so frequent</li></ul></li><li><p><u>Concurrency control based on validation:</u></p><ul><li>Transaction elements: TS RS WS</li><li>Three phases &amp; scheduler set: <ul><li>read validation write</li><li>Validation sequence</li><li>START VAL FIN</li></ul></li><li>Validation rules: T <ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mi>I</mi><mi>N</mi><mo stretchy="false">(</mo><mi>U</mi><mo stretchy="false">)</mo><mo>&gt;</mo><mi>S</mi><mi>T</mi><mi>A</mi><mi>R</mi><mi>T</mi><mo stretchy="false">(</mo><mi>T</mi><mo stretchy="false">)</mo><mtext> </mtext><mi>a</mi><mi>n</mi><mi>d</mi><mtext> </mtext><mi>R</mi><mi>S</mi><mo stretchy="false">(</mo><mi>T</mi><mo stretchy="false">)</mo><mo>∩</mo><mi>W</mi><mi>S</mi><mo stretchy="false">(</mo><mi>U</mi><mo stretchy="false">)</mo><mo mathvariant="normal">≠</mo><mi mathvariant="normal">∅</mi></mrow><annotation encoding="application/x-tex">FIN(U)&gt;START(T)~and~RS(T)\cap WS(U)\ne\empty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">ST</span><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mclose">)</span><span class="mspace nobreak"> </span><span class="mord mathnormal">an</span><span class="mord mathnormal">d</span><span class="mspace nobreak"> </span><span class="mord mathnormal" style="margin-right:0.05764em;">RS</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∩</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="inner"><span class="mord"><span class="mrel"></span></span></span><span class="fix"></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em;"></span><span class="mord">∅</span></span></span></span>: rollback T</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mi>I</mi><mi>N</mi><mo stretchy="false">(</mo><mi>U</mi><mo stretchy="false">)</mo><mo>&gt;</mo><mi>V</mi><mi>A</mi><mi>L</mi><mo stretchy="false">(</mo><mi>T</mi><mo stretchy="false">)</mo><mtext> </mtext><mi>a</mi><mi>n</mi><mi>d</mi><mtext> </mtext><mi>W</mi><mi>S</mi><mo stretchy="false">(</mo><mi>T</mi><mo stretchy="false">)</mo><mo>∩</mo><mi>W</mi><mi>S</mi><mo stretchy="false">(</mo><mi>U</mi><mo stretchy="false">)</mo><mo mathvariant="normal">≠</mo><mi mathvariant="normal">∅</mi></mrow><annotation encoding="application/x-tex">FIN(U)&gt;VAL(T)~and~WS(T)\cap WS(U)\ne\empty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mord mathnormal">A</span><span class="mord mathnormal">L</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mclose">)</span><span class="mspace nobreak"> </span><span class="mord mathnormal">an</span><span class="mord mathnormal">d</span><span class="mspace nobreak"> </span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∩</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="inner"><span class="mord"><span class="mrel"></span></span></span><span class="fix"></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em;"></span><span class="mord">∅</span></span></span></span>: postpone T</li></ul></li></ul></li></ul><h3 id="_8-2-failure-recovery" tabindex="-1"><a class="header-anchor" href="#_8-2-failure-recovery" aria-hidden="true">#</a> 8.2 Failure Recovery</h3><h4 id="db-failure-recovery-thoughts" tabindex="-1"><a class="header-anchor" href="#db-failure-recovery-thoughts" aria-hidden="true">#</a> <em>DB Failure &amp; Recovery Thoughts:</em></h4><ul><li><p><u>Types of failure:</u></p><ul><li>Transaction failure</li><li>System failure</li><li>Medium failure</li></ul></li><li><p><u>Concept of failure recovery:</u></p><ul><li>AD</li></ul></li><li><p><u>Macro thoughts of recovery:</u></p><ul><li><p>Transaction failure: redo undo single transaction</p></li><li><p>System failure: system log and checkpoint</p><ul><li>checkpoint: DB buffer is consistent with DB disk</li></ul></li><li><p>Medium failure: copy and dump point + log</p></li></ul><blockquote><p>Brief summary:</p></blockquote></li></ul><hr><h4 id="buffer-processing-strategies-log" tabindex="-1"><a class="header-anchor" href="#buffer-processing-strategies-log" aria-hidden="true">#</a> <em>Buffer Processing Strategies &amp; Log:</em></h4><ul><li><p><u>Transaction operations:</u> RW IO</p></li><li><p><u>Buffer processing strategies:</u></p><ul><li>Force: <code>Output</code> in <code>(start, commit]</code></li><li>No steal: <code>Output</code> in <code>[commit, finish)</code></li><li>No force: redo (with no steal)</li><li>Steal: undo (with force)</li></ul><blockquote><p>The <strong>intersection</strong> of <code>[no] force</code> and <code>[no] steal</code> will be taken.</p><p>Notice that the <code>write</code> in concurrency control is memory (buffer) level, here <code>output</code> is disk level. The commit of transaction means the over of memory operation, not the disk.</p></blockquote></li><li><p><u>Log and recovery strategies:</u></p><ul><li>Log info</li><li>Type and recovery strategies:</li></ul></li></ul><hr><h4 id="undo-redo-log-failure-recovery" tabindex="-1"><a class="header-anchor" href="#undo-redo-log-failure-recovery" aria-hidden="true">#</a> <em>Undo &amp; Redo Log Failure Recovery:</em></h4><ul><li><p><u>Undo log and its failure recovery:</u></p><ul><li><p>How to log: <code>&lt;T, X, v&gt;</code>(write) <code>OUTPUT </code> <code>&lt;COMMIT T&gt; &lt;ABORT T&gt;</code></p><ul><li>What does the commit mean? Finish <code>OUTPUT</code></li><li>For uncommitted or aborted, undo</li><li>For committed, do nothing</li></ul><blockquote><p><code>OUTPUT</code> doesn’t appear in the log</p></blockquote></li><li><p>How to set checkpoint:</p><ul><li>static <code>&lt;CKPT&gt;</code></li><li>non-static <code>&lt;START CKPT(T1,...,Tk)&gt; ... &lt;END CKPT&gt;</code></li></ul></li><li><p>How to recover: From back to front, redo abort or not commit, until:</p><ul><li><p><code>&lt;CKPT&gt;</code></p></li><li><p>if <code>&lt;END CKPT&gt;</code> first, undo until first <code>&lt;START CKPT(T1,...,Tk)&gt;</code></p></li><li><p>if <code>&lt;START CKPT(T1,...,Tk)&gt;</code> first, undo until first uncommitted <code>&lt;START Ti&gt;</code></p></li></ul></li><li><p>Problems: low performance (frequent output)</p></li></ul></li><li><p><u>Redo log and its failure recovery:</u></p><ul><li>How to log: <code>&lt;T, X, v&gt;</code>(write) <code>&lt;COMMIT T&gt; &lt;ABORT T&gt;</code> <code>OUTPUT </code><ul><li>What does the commit mean? Begin <code>OUTPUT</code></li><li>For committed, redo</li><li>For uncommitted or aborted, do nothing</li></ul></li><li>How to set checkpoint: the same as undo</li><li>How to recover: <ol><li>From end to front, find the first checkpoint, record the committed transactions at the same time</li><li>From checkpoint to end, redo</li></ol></li><li>Problems: low flexibility (data can only be seen after <code>commit</code>)</li></ul></li><li><p><u>Undo/Redo log and its failure recovery:</u></p><ul><li>How to log:</li><li>How to set checkpoint: the same as undo:</li><li>How to recover: <ol><li>From back to front, find the first checkpoint, record commit</li><li>From back to front, <strong>undo</strong> uncommitted or aborted</li><li>From front to back, <strong>redo</strong> committed</li></ol></li></ul></li></ul></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/SunDocker/SunDocker.github.io/edit/main/docs/notes/Theory/DatabaseSystem.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page on GitHub" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">Last update: </span><!----></div><div class="contributors"><span class="label">Contributors: </span><!--[--><!--[--><span class="contributor" title="email: sundocker@qq.com">SunDocker</span><!--]--><!--]--></div></div></footer><nav class="page-nav"><a href="/notes/Theory/DataStructure.html" class="nav-link prev" aria-label="Data Structure &amp; Algorithm"><div class="hint"><span class="arrow start"></span>Prev</div><div class="link"><span class="font-icon icon iconfont icon-emmet" style=""></span>Data Structure &amp; Algorithm</div></a><a href="/notes/Theory/DesignPatterns.html" class="nav-link next" aria-label="Design Patterns"><div class="hint">Next<span class="arrow end"></span></div><div class="link">Design Patterns<span class="font-icon icon iconfont icon-float" style=""></span></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">Default footer</div><div class="copyright">Copyright © 2023 Dominic Sun</div></footer></div><!--]--><!----><!----><!--]--></div>
    <script type="module" src="/assets/app-a94a8ef5.js" defer></script>
  </body>
</html>
